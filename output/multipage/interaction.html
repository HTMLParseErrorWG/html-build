<!DOCTYPE html><html class=split lang=en-US-x-hixie><script src=/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport><title>HTML Standard</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/standard.css><link rel=icon href=https://resources.whatwg.org/logo.svg><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script><style>
   .status { min-height: 0.6em; font: 1em sans-serif; width: 9em; padding: 0.3em; position: absolute; z-index: 8; right: 0.3em; background: #EEE; color: black; box-shadow: 0 0 3px #999; overflow: hidden; margin: -2em 0 0 0; border-collapse: initial; border-spacing: initial; }
   .status:hover { z-index: 9; }
   .status:focus-within { z-index: 9; }
   .status.wrapped > :not(input) { display: none; }
   .status > input { position: absolute; left: 0; top: 0; width: 1em; height: 1em; border: none; background: transparent; padding: 0; margin: 0; }
   .status > p { font-size: 0.6em; margin: 0; padding: 0; }
   .status > p + p { padding-top: 0.5em; }
   .status > p > strong { margin-left: 1.5em; }
   .status > .support { display: block; }
   .status > .support > span { padding: 0.2em 0; display: block; display: table; }
   .status > .support > span.partial { color: #666666; filter: grayscale(50%); }
   .status > .support > span.no { color: #CCCCCC; filter: grayscale(100%); }
   .status > .support > span.no::before { opacity: 0.5; }
   .status > .support > span:first-of-type { padding-top: 0.5em; }
   .status > .support > span > span { padding: 0 0.5em; display: table-cell; vertical-align: top; }
   .status > .support > span > span:first-child { width: 100%; }
   .status > .support > span > span:last-child { width: 100%; white-space: pre; padding: 0; }
   .status > .support > span::before { content: ' '; display: table-cell; min-width: 1.5em; height: 1.5em; background: no-repeat center center; background-size: contain; text-align: right; font-size: 0.75em; font-weight: bold; }
   .status > .support > .and_chr::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .and_ff::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .and_uc::before { background-image: url(https://resources.whatwg.org/browser-logos/uc.png); } /* UC Browser for Android */
   .status > .support > .android::before { background-image: url(https://resources.whatwg.org/browser-logos/android.svg); }
   .status > .support > .bb::before { background-image: url(https://resources.whatwg.org/browser-logos/bb.jpg); } /* Blackberry Browser */
   .status > .support > .chrome::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .edge::before { background-image: url(https://resources.whatwg.org/browser-logos/edge.svg); }
   .status > .support > .firefox::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .ie::before { background-image: url(https://resources.whatwg.org/browser-logos/ie.png); }
   .status > .support > .ie_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/ie-mobile.svg); }
   .status > .support > .ios_saf::before { background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg); }
   .status > .support > .op_mini::before { background-image: url(https://resources.whatwg.org/browser-logos/opera-mini.png); }
   .status > .support > .op_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .opera::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .safari::before { background-image: url(https://resources.whatwg.org/browser-logos/safari.png); }
   .status > .support > .samsung::before { background-image: url(https://resources.whatwg.org/browser-logos/samsung.png); }
   .status > .caniuse { text-align: right; font-style: italic; width: 100%; }
   .status > .caniuse + p { margin-top: 0.5em; border-top: 1px solid silver; }

   @media (max-width: 767px) {
     .status { right: -9em; }
   }
  </style><style>
   [hidden] { display: none; }

   .bad, .bad *:not(.X\58X) { color: gray; border-color: gray; background: transparent; }

   .fingerprint { position: absolute; right: 0; z-index: 5; }
   @media (max-width: 767px) {
     .fingerprint { max-width: 35px; }
   }

   .applies .yes, .yesno .yes { background: yellow; }
   .yesno .yes, .yesno .no { text-align: center; }

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   .parse-error-table td > p:first-child { margin-top: 0; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   @font-face {
     font-family: 'Essays1743';
     src: url('/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('/fonts/Essays1743-BoldItalic.ttf');
   }

   @media (max-width: 767px) {
     #abstractimg { width: 100%; }
   }
   #abstractimg, #abstractimg text { font: inherit; }
   #abstractimg rect { fill: #424242; }
   #abstractimg text { fill: #ffffff; font-size: 18px }
   #abstractimg .top { word-spacing: 50px; text-anchor: middle; }
   #abstractimg .left, #abstractimg .bottom { word-spacing: 12px; }
   #abstractimg .right { font-size: 25px; }
  </style><body>
  
  <script async="" src=/html-dfn.js></script>
  <script data-file-issue-url=https://github.com/whatwg/html/issues/new src=https://resources.whatwg.org/file-issue.js async=""></script>
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>14 October 2017</span></h2></hgroup>
   
   

   
  </header>

  

  
  

  
  

  

  <nav><a href=microdata.html>← 5 Microdata</a> — <a href=index.html>Table of Contents</a> — <a href=dnd.html>6.7 Drag and drop →</a></nav><ol class=toc><li id=toc-editing><a href=interaction.html#editing><span class=secno>6</span> User interaction</a><ol><li><a href=interaction.html#the-hidden-attribute><span class=secno>6.1</span> The <code>hidden</code> attribute</a><li><a href=interaction.html#inert-subtrees><span class=secno>6.2</span> Inert subtrees</a><li><a href=interaction.html#activation><span class=secno>6.3</span> Activation</a><li><a href=interaction.html#focus><span class=secno>6.4</span> Focus</a><ol><li><a href=interaction.html#introduction-8><span class=secno>6.4.1</span> Introduction</a><li><a href=interaction.html#data-model><span class=secno>6.4.2</span> Data model</a><li><a href=interaction.html#the-tabindex-attribute><span class=secno>6.4.3</span> The <code>tabindex</code> attribute</a><li><a href=interaction.html#focus-processing-model><span class=secno>6.4.4</span> Processing model</a><li><a href=interaction.html#sequential-focus-navigation><span class=secno>6.4.5</span> Sequential focus navigation</a><li><a href=interaction.html#focus-management-apis><span class=secno>6.4.6</span> Focus management APIs</a></ol><li><a href=interaction.html#assigning-keyboard-shortcuts><span class=secno>6.5</span> Assigning keyboard shortcuts</a><ol><li><a href=interaction.html#introduction-9><span class=secno>6.5.1</span> Introduction</a><li><a href=interaction.html#the-accesskey-attribute><span class=secno>6.5.2</span> The <code>accesskey</code> attribute</a><li><a href=interaction.html#keyboard-shortcuts-processing-model><span class=secno>6.5.3</span> Processing
  model</a></ol><li><a href=interaction.html#editing-2><span class=secno>6.6</span> Editing</a><ol><li><a href=interaction.html#contenteditable><span class=secno>6.6.1</span> Making document regions editable: The <code>contenteditable</code> content attribute</a><li><a href=interaction.html#making-entire-documents-editable:-the-designmode-idl-attribute><span class=secno>6.6.2</span> Making entire documents editable: the <code>designMode</code>
  IDL attribute</a><li><a href=interaction.html#best-practices-for-in-page-editors><span class=secno>6.6.3</span> Best practices for in-page editors</a><li><a href=interaction.html#editing-apis><span class=secno>6.6.4</span> Editing APIs</a><li><a href=interaction.html#spelling-and-grammar-checking><span class=secno>6.6.5</span> Spelling and grammar checking</a></ol></ol></ol><h2 id=editing><span class=secno>6</span> <dfn>User interaction</dfn><a href=#editing class=self-link></a></h2>


  <h3 id=the-hidden-attribute><span class=secno>6.1</span> The <dfn><code>hidden</code></dfn> attribute<a href=#the-hidden-attribute class=self-link></a></h3><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> hidden<span class="and_chr yes"><span>Chrome for Android</span> <span>61+</span></span><span class="chrome yes"><span>Chrome</span> <span>6+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>5.0+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.4+</span></span><span class="firefox yes"><span>Firefox</span> <span>4+</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="ie yes"><span>IE</span> <span>11+</span></span><span class="op_mini yes"><span>Opera Mini</span> <span>all+</span></span><span class="safari yes"><span>Safari</span> <span>5.1+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android yes"><span>Android Browser</span> <span>4+</span></span><span class="opera yes"><span>Opera</span> <span>11.1+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=hidden">caniuse.com</a></div>

  <p>All <a id=the-hidden-attribute:html-elements href=infrastructure.html#html-elements>HTML elements</a> may have the <code id=the-hidden-attribute:the-hidden-attribute><a href=#the-hidden-attribute>hidden</a></code> content
  attribute set. The <code id=the-hidden-attribute:the-hidden-attribute-2><a href=#the-hidden-attribute>hidden</a></code> attribute is a <a id=the-hidden-attribute:boolean-attribute href=common-microsyntaxes.html#boolean-attribute>boolean
  attribute</a>. When specified on an element, it indicates that the element is not yet, or is no
  longer, directly relevant to the page's current state, or that it is being used to declare content
  to be reused by other parts of the page as opposed to being directly accessed by the user. User agents should not render elements that have the <code id=the-hidden-attribute:the-hidden-attribute-3><a href=#the-hidden-attribute>hidden</a></code> attribute specified. This requirement may be implemented
  indirectly through the style layer. For example, an HTML+CSS user agent could implement these
  requirements <a href=rendering.html#hiddenCSS>using the rules suggested in the Rendering
  section</a>.</p>

  <p class=note>Because this attribute is typically implemented using CSS, it's also possible to
  override it using CSS. For instance, a rule that applies 'display: block' to all elements will
  cancel the effects of the <code id=the-hidden-attribute:the-hidden-attribute-4><a href=#the-hidden-attribute>hidden</a></code> attribute. Authors therefore
  have to take care when writing their style sheets to make sure that the attribute is still styled
  as expected.</p>

  <div class=example>

   <p>In the following skeletal example, the attribute is used to hide the Web game's main screen
   until the user logs in:</p>

   <pre>  &lt;h1>The Example Game&lt;/h1>
  &lt;section id="login">
   &lt;h2>Login&lt;/h2>
   &lt;form>
    ...
    &lt;!-- calls login() once the user's credentials have been checked -->
   &lt;/form>
   &lt;script>
    function login() {
      // switch screens
      document.getElementById('login').hidden = true;
      document.getElementById('game').hidden = false;
    }
   &lt;/script>
  &lt;/section>
  &lt;section id="game" hidden>
   ...
  &lt;/section></pre>

  </div>

  <p>The <code id=the-hidden-attribute:the-hidden-attribute-5><a href=#the-hidden-attribute>hidden</a></code> attribute must not be used to hide content that
  could legitimately be shown in another presentation. For example, it is incorrect to use <code id=the-hidden-attribute:the-hidden-attribute-6><a href=#the-hidden-attribute>hidden</a></code> to hide panels in a tabbed dialog, because the tabbed interface
  is merely a kind of overflow presentation — one could equally well just show all the form
  controls in one big page with a scrollbar. It is similarly incorrect to use this attribute to hide
  content just from one presentation — if something is marked <code id=the-hidden-attribute:the-hidden-attribute-7><a href=#the-hidden-attribute>hidden</a></code>, it is hidden from all presentations, including, for instance,
  screen readers.</p>

  
  

  <p>Elements that are not themselves <code id=the-hidden-attribute:the-hidden-attribute-8><a href=#the-hidden-attribute>hidden</a></code> must not
  <a id=the-hidden-attribute:hyperlink href=links.html#hyperlink>hyperlink</a> to elements that are <code id=the-hidden-attribute:the-hidden-attribute-9><a href=#the-hidden-attribute>hidden</a></code>. The <code>for</code> attributes of <code id=the-hidden-attribute:the-label-element><a href=forms.html#the-label-element>label</a></code> and <code id=the-hidden-attribute:the-output-element><a href=form-elements.html#the-output-element>output</a></code> elements that are not
  themselves <code id=the-hidden-attribute:the-hidden-attribute-10><a href=#the-hidden-attribute>hidden</a></code> must similarly not refer to elements that are
  <code id=the-hidden-attribute:the-hidden-attribute-11><a href=#the-hidden-attribute>hidden</a></code>. In both cases, such references would cause user
  confusion.</p>

  <p>Elements and scripts may, however, refer to elements that are <code id=the-hidden-attribute:the-hidden-attribute-12><a href=#the-hidden-attribute>hidden</a></code> in other contexts.</p>

  <div class=example>

   <p>For example, it would be incorrect to use the <code id=the-hidden-attribute:attr-hyperlink-href><a href=links.html#attr-hyperlink-href>href</a></code>
   attribute to link to a section marked with the <code id=the-hidden-attribute:the-hidden-attribute-13><a href=#the-hidden-attribute>hidden</a></code> attribute.
   If the content is not applicable or relevant, then there is no reason to link to it.</p>

   <p>It would be fine, however, to use the ARIA <code id=the-hidden-attribute:attr-aria-describedby><a data-x-internal=attr-aria-describedby href=https://w3c.github.io/aria/aria/aria.html#aria-describedby>aria-describedby</a></code> attribute to refer to descriptions that are
   themselves <code id=the-hidden-attribute:the-hidden-attribute-14><a href=#the-hidden-attribute>hidden</a></code>. While hiding the descriptions implies that
   they are not useful alone, they could be written in such a way that they are useful in the
   specific context of being referenced from the images that they describe.</p>

   <p>Similarly, a <code id=the-hidden-attribute:the-canvas-element><a href=canvas.html#the-canvas-element>canvas</a></code> element with the <code id=the-hidden-attribute:the-hidden-attribute-15><a href=#the-hidden-attribute>hidden</a></code>
   attribute could be used by a scripted graphics engine as an off-screen buffer, and a form control
   could refer to a hidden <code id=the-hidden-attribute:the-form-element><a href=forms.html#the-form-element>form</a></code> element using its <code id=the-hidden-attribute:attr-fae-form><a href=form-control-infrastructure.html#attr-fae-form>form</a></code> attribute.</p>

  </div>

  <p>Elements in a section hidden by the <code id=the-hidden-attribute:the-hidden-attribute-16><a href=#the-hidden-attribute>hidden</a></code> attribute are still
  active, e.g. scripts and form controls in such sections still execute and submit respectively.
  Only their presentation to the user changes.</p>

  

  <p>The <dfn id=dom-hidden><code>hidden</code></dfn> IDL attribute must <a id=the-hidden-attribute:reflect href=common-dom-interfaces.html#reflect>reflect</a>
  the content attribute of the same name.</p>

  



  <h3 id=inert-subtrees><span class=secno>6.2</span> Inert subtrees<a href=#inert-subtrees class=self-link></a></h3>

  <p class=note>This section <strong>does not</strong> define or create any content attribute
  named "inert". This section merely defines an abstract <em>concept</em> of
  <a href=#inert id=inert-subtrees:inert>inertness</a>.</p>

  <p>A node (in particular elements and text nodes) can be marked as <dfn id=inert>inert</dfn>. When a node
  is <a href=#inert id=inert-subtrees:inert-2>inert</a>, then the user agent must act as if the node was absent for the purposes of
  targeting user interaction events, may ignore the node for the purposes of text search user
  interfaces (commonly known as "find in page"), and may prevent the user from selecting text in
  that node. User agents should allow the user to override the restrictions on search and text
  selection, however.</p>

  <p class=example>For example, consider a page that consists of just a single <a href=#inert id=inert-subtrees:inert-3>inert</a>
  paragraph positioned in the middle of a <code id=inert-subtrees:the-body-element><a href=sections.html#the-body-element>body</a></code>. If a user moves their pointing device
  from the <code id=inert-subtrees:the-body-element-2><a href=sections.html#the-body-element>body</a></code> over to the <a href=#inert id=inert-subtrees:inert-4>inert</a> paragraph and clicks on the paragraph,
  no <code id=inert-subtrees:event-mouseover><a data-x-internal=event-mouseover href=https://w3c.github.io/uievents/#event-type-mouseover>mouseover</a></code> event would be fired, and the <code id=inert-subtrees:event-mousemove><a data-x-internal=event-mousemove href=https://w3c.github.io/uievents/#event-type-mousemove>mousemove</a></code> and <code id=inert-subtrees:event-click><a data-x-internal=event-click href=https://w3c.github.io/uievents/#event-type-click>click</a></code> events would
  be fired on the <code id=inert-subtrees:the-body-element-3><a href=sections.html#the-body-element>body</a></code> element rather than the paragraph.</p>

  <p class=note>When a node is inert, it generally cannot be focused. Inert nodes that are <a href=interactive-elements.html#concept-command id=inert-subtrees:concept-command>commands</a> will also get disabled.</p>

  <p>While a <a id=inert-subtrees:browsing-context-container href=browsers.html#browsing-context-container>browsing context container</a> is marked as <a href=#inert id=inert-subtrees:inert-5>inert</a>, its
  <a id=inert-subtrees:nested-browsing-context href=browsers.html#nested-browsing-context>nested browsing context</a>'s <a id=inert-subtrees:active-document href=browsers.html#active-document>active document</a>, and all nodes in that
  <code id=inert-subtrees:document><a href=dom.html#document>Document</a></code>, must be marked as <a href=#inert id=inert-subtrees:inert-6>inert</a>.</p>

  <p>An entire <code id=inert-subtrees:document-2><a href=dom.html#document>Document</a></code> can be marked as <dfn id=blocked-by-a-modal-dialog>blocked by a modal dialog</dfn>
  <var>subject</var>. While a <code id=inert-subtrees:document-3><a href=dom.html#document>Document</a></code> is so marked, every node that is <a href=https://dom.spec.whatwg.org/#in-a-document id=inert-subtrees:in-a-document data-x-internal=in-a-document>in the <code>Document</code></a>, with the exception of the
  <var>subject</var> element and its descendants, must be marked <a href=#inert id=inert-subtrees:inert-7>inert</a>. (The elements
  excepted by this paragraph can additionally be marked <a href=#inert id=inert-subtrees:inert-8>inert</a> through other means;
  being part of a modal dialog does not "protect" a node from being marked <a href=#inert id=inert-subtrees:inert-9>inert</a>.)</p>

  <p>Only one element at a time can mark a <code id=inert-subtrees:document-4><a href=dom.html#document>Document</a></code> as being <a href=#blocked-by-a-modal-dialog id=inert-subtrees:blocked-by-a-modal-dialog>blocked by a modal
  dialog</a>. When a new <code id=inert-subtrees:the-dialog-element><a href=interactive-elements.html#the-dialog-element>dialog</a></code> is made to <a href=#blocked-by-a-modal-dialog id=inert-subtrees:blocked-by-a-modal-dialog-2>block</a> a <code id=inert-subtrees:document-5><a href=dom.html#document>Document</a></code>, the previous element, if any, stops blocking the
  <code id=inert-subtrees:document-6><a href=dom.html#document>Document</a></code>.</p>

  <p class=note>The <code id=inert-subtrees:the-dialog-element-2><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element's <code id=inert-subtrees:dom-dialog-showmodal><a href=interactive-elements.html#dom-dialog-showmodal>showModal()</a></code> method makes use of this mechanism.</p>




  <h3 id=activation><span class=secno>6.3</span> Activation<a href=#activation class=self-link></a></h3>

  <p>Certain elements in HTML have an <a id=activation:activation-behaviour href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation behavior</a>, which means that the user
  can activate them. This is always caused by a <code id=activation:event-click><a data-x-internal=event-click href=https://w3c.github.io/uievents/#event-type-click>click</a></code> event.</p>

  

  <p>The user agent should allow the user to manually trigger elements that have an <a id=activation:activation-behaviour-2 href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation
  behavior</a>, for instance using keyboard or voice input, or through mouse clicks. When the
  user triggers an element with a defined <a id=activation:activation-behaviour-3 href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation behavior</a> in a manner other than
  clicking it, the default action of the interaction event must be to <a id=activation:fire-a-click-event href=webappapis.html#fire-a-click-event>fire a <code>click</code> event</a> at the element.</p>
  

  <p id=allowed-to-show-a-popup>An algorithm is <dfn id=triggered-by-user-activation data-export="">triggered by user
  activation</dfn> if any of the following conditions is true:</p>

  <ul><li><p>The <a href=webappapis.html#concept-task id=activation:concept-task>task</a> in which the algorithm is running is currently
   processing an <a id=activation:activation-behaviour-4 href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation behavior</a> whose <code id=activation:event-click-2><a data-x-internal=event-click href=https://w3c.github.io/uievents/#event-type-click>click</a></code>
   event's <code id=activation:dom-event-istrusted><a data-x-internal=dom-event-istrusted href=https://dom.spec.whatwg.org/#dom-event-istrusted>isTrusted</a></code> attribute is true.<li>
    <p>The <a href=webappapis.html#concept-task id=activation:concept-task-2>task</a> in which the algorithm is running is currently
    running the event listener for an event whose <code id=activation:dom-event-istrusted-2><a data-x-internal=dom-event-istrusted href=https://dom.spec.whatwg.org/#dom-event-istrusted>isTrusted</a></code> attribute is true and whose <code id=activation:dom-event-type><a data-x-internal=dom-event-type href=https://dom.spec.whatwg.org/#dom-event-type>type</a></code> is one of:</p>

    <ul class=brief><li><code id=activation:event-change><a href=indices.html#event-change>change</a></code><li><code id=activation:event-click-3><a data-x-internal=event-click href=https://w3c.github.io/uievents/#event-type-click>click</a></code><li><code id=activation:event-dblclick><a data-x-internal=event-dblclick href=https://w3c.github.io/uievents/#event-type-dblclick>dblclick</a></code><li><code id=activation:event-mouseup><a data-x-internal=event-mouseup href=https://w3c.github.io/uievents/#event-type-mouseup>mouseup</a></code><li><code id=activation:event-pointerup><a data-x-internal=event-pointerup href=https://w3c.github.io/pointerevents/#the-pointerup-event>pointerup</a></code><li><code id=activation:event-reset><a href=indices.html#event-reset>reset</a></code><li><code id=activation:event-submit><a href=indices.html#event-submit>submit</a></code><li><code id=activation:event-touchend><a data-x-internal=event-touchend href=https://w3c.github.io/touch-events/#event-touchend>touchend</a></code></ul>

   <li>
    <p>The <a href=webappapis.html#concept-task id=activation:concept-task-3>task</a> in which the algorithm is running was <a href=webappapis.html#queue-a-task id=activation:queue-a-task>queued</a> by an algorithm that was <a href=#triggered-by-user-activation id=activation:triggered-by-user-activation>triggered by user
    activation</a>, and the chain of such algorithms started within a user-agent defined
    timeframe.</p>

    <p class=example>For example, if a user clicked a button, it might be acceptable for a popup
    to result from that after 4 seconds, but it would likely not be acceptable for a popup to result
    from that after 4 hours.</p>
   </ul>

  


  

  <dl class=domintro><dt><var>element</var> . <code id=activation:dom-click><a href=#dom-click>click</a></code>()<dd>

    <p>Acts as if the element was clicked.</p>

   </dl>

  

  <p>Each element has an associated <dfn id=click-in-progress-flag>click in progress flag</dfn>, which is initially unset.</p>

  <p>The <dfn id=dom-click><code>click()</code></dfn> method must run the following steps:</p>

  <ol><li><p>If this element is a form control that is <a href=form-control-infrastructure.html#concept-fe-disabled id=activation:concept-fe-disabled>disabled</a>, then abort these steps.<li><p>If this element's <a href=#click-in-progress-flag id=activation:click-in-progress-flag>click in progress flag</a> is set, then abort these
   steps.<li><p>Set this element's <a href=#click-in-progress-flag id=activation:click-in-progress-flag-2>click in progress flag</a>.<li><p><a id=activation:fire-a-synthetic-mouse-event href=webappapis.html#fire-a-synthetic-mouse-event>Fire a synthetic mouse event</a> at this element, with the <var>not trusted
   flag</var> set.<li><p>Unset this element's <a href=#click-in-progress-flag id=activation:click-in-progress-flag-3>click in progress flag</a>.</ol>

  



  <h3 id=focus><span class=secno>6.4</span> Focus<a href=#focus class=self-link></a></h3>

  
  
  
  

  

  <h4 id=introduction-8><span class=secno>6.4.1</span> Introduction<a href=#introduction-8 class=self-link></a></h4>

  <p><i>This section is non-normative.</i></p>

  <p>An HTML user interface typically consists of multiple interactive widgets, such as form
  controls, scrollable regions, links, dialog boxes, browser tabs, and so forth. These widgets form
  a hierarchy, with some (e.g. browser tabs, dialog boxes) containing others (e.g. links, form
  controls).</p>

  <p>When interacting with an interface using a keyboard, key input is channeled from the system,
  through the hierarchy of interactive widgets, to an active widget, which is said to be
  <a href=#focused id=introduction-8:focused>focused</a>.</p>

  <div class=example>

   <p>Consider an HTML application running in a browser tab running in a graphical environment.
   Suppose this application had a page with some text controls and links, and was currently showing
   a modal dialog, which itself had a text control and a button.</p>

   <p>The hierarchy of focusable widgets, in this scenario, would include the browser window, which
   would have, amongst its children, the browser tab containing the HTML application. The tab itself
   would have as its children the various links and text controls, as well as the dialog. The dialog
   itself would have as its children the text control and the button.</p>

   <p><img width=800 src=/images/focus-tree.png height=450 alt=""> 

   <p>If the widget with <a href=#focused id=introduction-8:focused-2>focus</a> in this example was the text control in
   the dialog box, then key input would be channeled from the graphical system to ① the Web
   browser, then to ② the tab, then to ③ the dialog, and finally to ④ the text
   control.</p>

  </div>

  <p>Keyboard <em>events</em> are always targeted at this <a href=#focused id=introduction-8:focused-3>focused</a> element.</p>


  <h4 id=data-model><span class=secno>6.4.2</span> Data model<a href=#data-model class=self-link></a></h4>

  <p>The term <dfn id=focusable-area>focusable area</dfn> is used to refer to regions of the interface that can become
  the target of keyboard input. Focusable areas can be elements, parts of elements, or other regions
  managed by the user agent.</p>

  <p>Each <a href=#focusable-area id=data-model:focusable-area>focusable area</a> has a <dfn id=dom-anchor>DOM anchor</dfn>, which is a <code id=data-model:node><a data-x-internal=node href=https://dom.spec.whatwg.org/#interface-node>Node</a></code> object
  that represents the position of the <a href=#focusable-area id=data-model:focusable-area-2>focusable area</a> in the DOM. (When the <a href=#focusable-area id=data-model:focusable-area-3>focusable
  area</a> is itself a <code id=data-model:node-2><a data-x-internal=node href=https://dom.spec.whatwg.org/#interface-node>Node</a></code>, it is its own <a href=#dom-anchor id=data-model:dom-anchor>DOM anchor</a>.) The <a href=#dom-anchor id=data-model:dom-anchor-2>DOM anchor</a> is
  used in some APIs as a substitute for the <a href=#focusable-area id=data-model:focusable-area-4>focusable area</a> when there is no other DOM object
  to represent the <a href=#focusable-area id=data-model:focusable-area-5>focusable area</a>.</p>

  <p>The following table describes what objects can be <a href=#focusable-area id=data-model:focusable-area-6>focusable
  areas</a>. The cells in the left column describe objects that can be <a href=#focusable-area id=data-model:focusable-area-7>focusable areas</a>; the cells in the right column describe the <a href=#dom-anchor id=data-model:dom-anchor-3>DOM
  anchors</a> for those elements. (The cells that span both columns are non-normative examples.)</p>

  <table id=table-fa><thead><tr><th id=th-fa-area><a href=#focusable-area id=data-model:focusable-area-8>Focusable area</a>
     <th id=th-fa-dom-rep><a href=#dom-anchor id=data-model:dom-anchor-4>DOM anchor</a>
    <tr><th colspan=2 id=th-fa-examples>Examples

   <tbody><tr><th headers=th-fa-area id=td-fa-1 class=data-header>
     Elements that have their <a href=#specially-focusable id=data-model:specially-focusable>tabindex focus flag</a> set, that are not <a href=semantics-other.html#concept-element-disabled id=data-model:concept-element-disabled>actually disabled</a>, that are not <a href=#expressly-inert id=data-model:expressly-inert>expressly
     inert</a>, and that are either <a id=data-model:being-rendered href=rendering.html#being-rendered>being rendered</a> or <a id=data-model:being-used-as-relevant-canvas-fallback-content href=canvas.html#being-used-as-relevant-canvas-fallback-content>being used as relevant
     canvas fallback content</a>. 
     <td headers="td-fa-1 th-fa-dom-rep">
     The element itself.
    <tr><td colspan=2 headers="td-fa-1 th-fa-examples">
     <p class=example><code id=data-model:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>, <code id="data-model:text-(type=text)-state-and-search-state-(type=search)"><a href="input.html#text-(type=text)-state-and-search-state-(type=search)">&lt;input
     type=text></a></code>, sometimes <code id=data-model:the-a-element><a href=text-level-semantics.html#the-a-element>&lt;a href=""></a></code> (depending on platform
     conventions).

   <tbody><tr><th headers=th-fa-area id=td-fa-2 class=data-header>
     The shapes of <code id=data-model:the-area-element><a href=image-maps.html#the-area-element>area</a></code> elements in an <a id=data-model:image-map href=image-maps.html#image-map>image map</a> associated with an
     <code id=data-model:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element that is <a id=data-model:being-rendered-2 href=rendering.html#being-rendered>being rendered</a> and is not <a href=#expressly-inert id=data-model:expressly-inert-2>expressly
     inert</a>.
     <td headers="td-fa-2 th-fa-dom-rep">
     The <code id=data-model:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> element.
    <tr><td colspan=2 headers="td-fa-2 th-fa-examples">
     <div class=example>
      <p>In the following example, the <code id=data-model:the-area-element-2><a href=image-maps.html#the-area-element>area</a></code> element creates two shapes, one on each
      image. The <a href=#dom-anchor id=data-model:dom-anchor-5>DOM anchor</a> of the first shape is the first <code id=data-model:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> element, and the
      <a href=#dom-anchor id=data-model:dom-anchor-6>DOM anchor</a> of the second shape is the second <code id=data-model:the-img-element-4><a href=embedded-content.html#the-img-element>img</a></code> element.</p>
      <pre>&lt;map id=wallmap>&lt;area alt="Enter Door" coords="10,10,100,200" href="door.html">&lt;/map>
...
&lt;img src="images/innerwall.jpeg" alt="There is a white wall here, with a door." usemap="#wallmap">
...
&lt;img src="images/outerwall.jpeg" alt="There is a red wall here, with a door." usemap="#wallmap"></pre>
     </div>

   <tbody><tr><th headers=th-fa-area id=td-fa-3 class=data-header>
     The user-agent provided subwidgets of elements that are <a id=data-model:being-rendered-3 href=rendering.html#being-rendered>being rendered</a> and are not
     <a href=semantics-other.html#concept-element-disabled id=data-model:concept-element-disabled-2>actually disabled</a> or <a href=#expressly-inert id=data-model:expressly-inert-3>expressly
     inert</a>.
     <td headers="td-fa-3 th-fa-dom-rep">
     The element for which the <a href=#focusable-area id=data-model:focusable-area-9>focusable area</a> is a subwidget.
    <tr><td colspan=2 headers="td-fa-3 th-fa-examples">
     <p class=example>The <a href=media.html#expose-a-user-interface-to-the-user id=data-model:expose-a-user-interface-to-the-user>controls in the user
     interface that is exposed to the user</a> for a <code id=data-model:the-video-element><a href=media.html#the-video-element>video</a></code> element, the up and down
     buttons in a spin-control version of <code id="data-model:number-state-(type=number)"><a href="input.html#number-state-(type=number)">&lt;input
     type=number></a></code>, the two range control widgets in a <code id="data-model:range-state-(type=range)"><a href="input.html#range-state-(type=range)">&lt;input type=range multiple></a></code>, the part of a
     <code id=data-model:the-details-element><a href=interactive-elements.html#the-details-element>details</a></code> element's rendering that enabled the element to be opened or closed using
     keyboard input.</p>

   <tbody><tr><th headers=th-fa-area id=td-fa-4 class=data-header>
     The scrollable regions of elements that are <a id=data-model:being-rendered-4 href=rendering.html#being-rendered>being rendered</a> and are not
     <a href=#expressly-inert id=data-model:expressly-inert-4>expressly inert</a>. 
     <td headers="td-fa-4 th-fa-dom-rep">
     The element for which the box that the scrollable region scrolls was created.
    <tr><td colspan=2 headers="td-fa-4 th-fa-examples">
     <p class=example>The CSS <a id="data-model:'overflow'" href=https://drafts.csswg.org/css-overflow/#propdef-overflow data-x-internal="'overflow'">'overflow'</a> property's 'scroll' value typically creates
     a scrollable region.</p>

   <tbody><tr><th headers=th-fa-area id=td-fa-5 class=data-header>
     The <a id=data-model:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> of a <code id=data-model:document><a href=dom.html#document>Document</a></code> that has a <a href=browsers.html#concept-document-bc id=data-model:concept-document-bc>browsing context</a> and is not <a href=#inert id=data-model:inert>inert</a>.
     <td headers="td-fa-5 th-fa-dom-rep">
     The <code id=data-model:document-2><a href=dom.html#document>Document</a></code> for which the <a id=data-model:viewport-2 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> was created.
    <tr><td colspan=2 headers="td-fa-5 th-fa-examples">
     <p class=example>The contents of an <code id=data-model:the-iframe-element-2><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>.</p>

   <tbody><tr><th headers=th-fa-area id=td-fa-6 class=data-header>
     Any other element or part of an element, especially to aid with accessibility or to better
     match platform conventions.
     <td headers="td-fa-6 th-fa-dom-rep">
     The element.
    <tr><td colspan=2 headers="td-fa-6 th-fa-examples">
     <p class=example>A user agent could make all list item bullets focusable, so that a user can
     more easily navigate lists.</p>
     <p class=example>Similarly, a user agent could make all elements with <code id=data-model:attr-title><a href=dom.html#attr-title>title</a></code> attributes focusable, so that their advisory information can
     be accessed.</p>

  </table>

  <p id=bc-focus-ergo-bcc-focus class=note>A <a id=data-model:browsing-context-container href=browsers.html#browsing-context-container>browsing context container</a> (e.g. an
  <code id=data-model:the-iframe-element-3><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>) is a <a href=#focusable-area id=data-model:focusable-area-10>focusable area</a>, but key events routed to a <a id=data-model:browsing-context-container-2 href=browsers.html#browsing-context-container>browsing context
  container</a> get immediately routed to the <a id=data-model:nested-browsing-context href=browsers.html#nested-browsing-context>nested browsing context</a>'s <a id=data-model:active-document href=browsers.html#active-document>active
  document</a>. Similarly, in sequential focus navigation a <a id=data-model:browsing-context-container-3 href=browsers.html#browsing-context-container>browsing context
  container</a> essentially acts merely as a placeholder for its <a id=data-model:nested-browsing-context-2 href=browsers.html#nested-browsing-context>nested browsing
  context</a>'s <a id=data-model:active-document-2 href=browsers.html#active-document>active document</a>.</p>

  <hr>

  <p>The following create <dfn id=control-group>control groups</dfn>:

  <ul class=brief><li><code id=data-model:document-3><a href=dom.html#document>Document</a></code> object that have <a href=browsers.html#concept-document-bc id=data-model:concept-document-bc-2>browsing
   contexts</a>.<li><code id=data-model:the-dialog-element><a href=interactive-elements.html#the-dialog-element>dialog</a></code> elements that have an <code id=data-model:attr-dialog-open><a href=interactive-elements.html#attr-dialog-open>open</a></code>
   attribute specified and that are <a id=data-model:being-rendered-5 href=rendering.html#being-rendered>being rendered</a>.</ul>

  <p>The corresponding <code id=data-model:document-4><a href=dom.html#document>Document</a></code> object or <code id=data-model:the-dialog-element-2><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element is the created
  <a href=#control-group id=data-model:control-group>control group</a>'s <dfn id=control-group-owner-object>owner object</dfn>. (There
  is always a 1-to-1 mapping of <a href=#control-group id=data-model:control-group-2>control groups</a> to <a href=#control-group-owner-object id=data-model:control-group-owner-object>control group owner objects</a>.)</p>

  <p>Each <a href=#focusable-area id=data-model:focusable-area-11>focusable area</a> belongs to a single <a href=#control-group id=data-model:control-group-3>control group</a> as follows. If
  the <a href=#dom-anchor id=data-model:dom-anchor-7>DOM anchor</a> of a <a href=#focusable-area id=data-model:focusable-area-12>focusable area</a> is a <a href=#control-group-owner-object id=data-model:control-group-owner-object-2>control group
  owner object</a>, then that <a href=#focusable-area id=data-model:focusable-area-13>focusable area</a> belongs to that <a href=#control-group-owner-object id=data-model:control-group-owner-object-3>control group
  owner object</a>'s <a href=#control-group id=data-model:control-group-4>control group</a>. Otherwise, the <a href=#focusable-area id=data-model:focusable-area-14>focusable area</a>
  belongs to its <a href=#dom-anchor id=data-model:dom-anchor-8>DOM anchor</a>'s nearest ancestor <a href=#control-group-owner-object id=data-model:control-group-owner-object-4>control group owner
  object</a>'s <a href=#control-group id=data-model:control-group-5>control group</a>.</p>

  <div class=example>
   <p>Thus:</p>

   <ul><li><p>A <a id=data-model:viewport-3 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> always belongs to the <a href=#control-group id=data-model:control-group-6>control group</a> of the
    <code id=data-model:document-5><a href=dom.html#document>Document</a></code> for which the <a id=data-model:viewport-4 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> was created.<li><p>An <code id=data-model:the-input-element><a href=input.html#the-input-element>input</a></code> control belongs to the <a href=#control-group id=data-model:control-group-7>control group</a> of its nearest
    ancestor <code id=data-model:the-dialog-element-3><a href=interactive-elements.html#the-dialog-element>dialog</a></code> or <code id=data-model:document-6><a href=dom.html#document>Document</a></code>.<li><p>An image map's shapes belong to the nearest ancestor <code id=data-model:the-dialog-element-4><a href=interactive-elements.html#the-dialog-element>dialog</a></code> or
    <code id=data-model:document-7><a href=dom.html#document>Document</a></code> of the <code id=data-model:the-img-element-5><a href=embedded-content.html#the-img-element>img</a></code> elements (not the <code id=data-model:the-area-element-3><a href=image-maps.html#the-area-element>area</a></code> elements
    — this means one <code id=data-model:the-area-element-4><a href=image-maps.html#the-area-element>area</a></code> element might create multiple shapes in different
    <a href=#control-group id=data-model:control-group-8>control groups</a>).</ul>
  </div>

  <p class=note>It is possible for a <a href=#control-group id=data-model:control-group-9>control group</a> to be empty, i.e. for it to have
  no <a href=#focusable-area id=data-model:focusable-area-15>focusable areas</a>.</p>

  <hr>

  <p><span id=expressly-inert-control></span><span id=expressly-inert-dialog></span>An element
  is <dfn id=expressly-inert>expressly inert</dfn> if it is <a href=#inert id=data-model:inert-2>inert</a> and its nearest ancestor <a href=#control-group-owner-object id=data-model:control-group-owner-object-5>control
  group owner object</a> is not <a href=#inert id=data-model:inert-3>inert</a>.</p>

  <div class=example>
   <p>In a page with no <code id=data-model:the-dialog-element-5><a href=interactive-elements.html#the-dialog-element>dialog</a></code> elements, all elements that are <a href=#inert id=data-model:inert-4>inert</a> are
   <a href=#expressly-inert id=data-model:expressly-inert-5>expressly inert</a>, and vice-versa.</p>

   <p>Inside an <a href=#inert id=data-model:inert-5>inert</a> <code id=data-model:the-dialog-element-6><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element, all descendant elements are not
   <a href=#expressly-inert id=data-model:expressly-inert-6>expressly inert</a>, even if they are <a href=#inert id=data-model:inert-6>inert</a>.</p>

   <p>A <code id=data-model:the-dialog-element-7><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element is <a href=#expressly-inert id=data-model:expressly-inert-7>expressly inert</a> if it is <a href=#inert id=data-model:inert-7>inert</a> and
   not nested inside another <a href=#inert id=data-model:inert-8>inert</a> dialog.</p>
  </div>

  <hr>

  <p>Each <a href=#control-group-owner-object id=data-model:control-group-owner-object-6>control group owner object</a> can also act as the <dfn id=dialog-group-manager>manager</dfn> of a <dfn id=dialog-group>dialog group</dfn>.</p>

  <p>Each <code id=data-model:the-dialog-element-8><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element that has an <code id=data-model:attr-dialog-open-2><a href=interactive-elements.html#attr-dialog-open>open</a></code>
  attribute specified and that is <a id=data-model:being-rendered-6 href=rendering.html#being-rendered>being rendered</a> (i.e. that is a <a href=#control-group-owner-object id=data-model:control-group-owner-object-7>control group
  owner object</a>) and is not <a href=#expressly-inert id=data-model:expressly-inert-8>expressly inert</a>
  belongs to the <a href=#dialog-group id=data-model:dialog-group>dialog group</a> whose <a href=#dialog-group-manager id=data-model:dialog-group-manager>manager</a> is
  the <code id=data-model:the-dialog-element-9><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element's nearest ancestor <a href=#control-group-owner-object id=data-model:control-group-owner-object-8>control group owner object</a>.</p>

  <p>If no <code id=data-model:the-dialog-element-10><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element has a particular <a href=#control-group-owner-object id=data-model:control-group-owner-object-9>control group owner object</a> as
  its nearest ancestor <a href=#control-group-owner-object id=data-model:control-group-owner-object-10>control group owner object</a>, then that <a href=#control-group-owner-object id=data-model:control-group-owner-object-11>control group owner
  object</a> has no <a href=#dialog-group id=data-model:dialog-group-2>dialog group</a>.</p>

  <p>Each <a href=#dialog-group id=data-model:dialog-group-3>dialog group</a> can have a <code id=data-model:the-dialog-element-11><a href=interactive-elements.html#the-dialog-element>dialog</a></code> designated as the <dfn id=focused-dialog-of-the-dialog-group>focused
  dialog of the dialog group</dfn>. Which <code id=data-model:the-dialog-element-12><a href=interactive-elements.html#the-dialog-element>dialog</a></code> is so designated changes over time,
  based on algorithms in this specification.</p>

  <p>Elements in <a href=#dialog-group id=data-model:dialog-group-4>dialog groups</a> are ordered in <a id=data-model:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree
  order</a>.</p>

  <hr>

  <p>One <a href=#focusable-area id=data-model:focusable-area-16>focusable area</a> in each non-empty <a href=#control-group id=data-model:control-group-10>control group</a> is designated the
  <dfn id=focused-area-of-the-control-group>focused area of the control group</dfn>. Which control is so designated changes over time,
  based on algorithms in this specification. If a <a href=#control-group id=data-model:control-group-11>control group</a> is empty, it has no <a href=#focused-area-of-the-control-group id=data-model:focused-area-of-the-control-group>focused area</a>.</p>

  <p><a href=#focusable-area id=data-model:focusable-area-17>Focusable areas</a> in <a href=#control-group id=data-model:control-group-12>control groups</a>
  are ordered relative to the <a id=data-model:tree-order-2 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a> of their <a href=#dom-anchor id=data-model:dom-anchor-9>DOM
  anchors</a>. <a href=#focusable-area id=data-model:focusable-area-18>Focusable areas</a> with the same <a href=#dom-anchor id=data-model:dom-anchor-10>DOM anchor</a> in a
  <a href=#control-group id=data-model:control-group-13>control group</a> are ordered relative to their CSS box's relative positions in a pre-order,
  depth-first traversal of the box tree. <a href=references.html#refsCSS>[CSS]</a></p>

  <hr>

  <p>The <dfn id=currently-focused-area-of-a-top-level-browsing-context>currently focused area of a top-level browsing context</dfn> at any particular time is
  the <a href=#focusable-area id=data-model:focusable-area-19>focusable area</a> or <code id=data-model:the-dialog-element-13><a href=interactive-elements.html#the-dialog-element>dialog</a></code> returned by this algorithm:</p>

  <ol><li><p>Let <var>candidate</var> be the <code id=data-model:document-8><a href=dom.html#document>Document</a></code> of the <a id=data-model:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level
   browsing context</a>.<li>

    <p>If <var>candidate</var> has a <a href=#dialog-group id=data-model:dialog-group-5>dialog group</a> with a designated
    <a href=#focused-dialog-of-the-dialog-group id=data-model:focused-dialog-of-the-dialog-group>focused dialog of the dialog group</a>, then let <var>candidate</var> be the
    designated <a href=#focused-dialog-of-the-dialog-group id=data-model:focused-dialog-of-the-dialog-group-2>focused dialog of the dialog group</a>, and redo this step.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href=#control-group id=data-model:control-group-14>control group</a>, and the
    designated <a href=#focused-area-of-the-control-group id=data-model:focused-area-of-the-control-group-2>focused area of the control group</a> is a <a id=data-model:browsing-context-container-4 href=browsers.html#browsing-context-container>browsing context
    container</a> with a non-null <a id=data-model:nested-browsing-context-3 href=browsers.html#nested-browsing-context>nested browsing context</a>, then let
    <var>candidate</var> be the <a id=data-model:active-document-3 href=browsers.html#active-document>active document</a> of that <a id=data-model:browsing-context-container-5 href=browsers.html#browsing-context-container>browsing context
    container</a>'s <a id=data-model:nested-browsing-context-4 href=browsers.html#nested-browsing-context>nested browsing context</a>, and redo this step.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href=#control-group id=data-model:control-group-15>control group</a>, let
    <var>candidate</var> be the designated <a href=#focused-area-of-the-control-group id=data-model:focused-area-of-the-control-group-3>focused area of the control
    group</a>.</p>

   <li><p>Return <var>candidate</var>.</ol>

  <p>An element that is the <a href=#dom-anchor id=data-model:dom-anchor-11>DOM anchor</a> of a <a href=#focusable-area id=data-model:focusable-area-20>focusable area</a> is said to <dfn id=gains-focus>gain focus</dfn> when that <a href=#focusable-area id=data-model:focusable-area-21>focusable area</a> becomes the <a href=#currently-focused-area-of-a-top-level-browsing-context id=data-model:currently-focused-area-of-a-top-level-browsing-context>currently
  focused area of a top-level browsing context</a>. When an element is the <a href=#dom-anchor id=data-model:dom-anchor-12>DOM anchor</a> of a
  <a href=#focusable-area id=data-model:focusable-area-22>focusable area</a> of the <a href=#currently-focused-area-of-a-top-level-browsing-context id=data-model:currently-focused-area-of-a-top-level-browsing-context-2>currently focused area of a top-level browsing context</a>,
  it is <dfn id=focused>focused</dfn>.</p>

  

  <p>The <dfn id=focus-chain>focus chain</dfn> of a <a href=#focusable-area id=data-model:focusable-area-23>focusable area</a> or <a href=#control-group-owner-object id=data-model:control-group-owner-object-12>control group owner
  object</a> <var>subject</var> is the ordered list constructed as follows:</p>

  <ol><li><p>Let <var>current object</var> be <var>subject</var>.<li><p>Let <var>output</var> be an empty list.<li><p><i>Loop</i>: Append <var>current object</var> to <var>output</var>.<li>

    <p>If <var>current object</var> is an <code id=data-model:the-area-element-5><a href=image-maps.html#the-area-element>area</a></code> element's shape, append
    that <code id=data-model:the-area-element-6><a href=image-maps.html#the-area-element>area</a></code> element to <var>output</var>.</p>

    <p>Otherwise, if <var>current object</var> is a <a href=#focusable-area id=data-model:focusable-area-24>focusable area</a> whose <a href=#dom-anchor id=data-model:dom-anchor-13>DOM
    anchor</a> is an element that is not <var>current object</var> itself, append that
    <a href=#dom-anchor id=data-model:dom-anchor-14>DOM anchor</a> element to <var>output</var>.</p>

   <li>

    <p>If <var>current object</var> is a <code id=data-model:the-dialog-element-14><a href=interactive-elements.html#the-dialog-element>dialog</a></code> object in a <a href=#dialog-group id=data-model:dialog-group-6>dialog group</a>,
    let <var>current object</var> be that <a href=#dialog-group id=data-model:dialog-group-7>dialog group</a>'s <a href=#dialog-group-manager id=data-model:dialog-group-manager-2>manager</a>, and return to the step labeled <i>loop</i>.</p>

    <p>Otherwise, if <var>current object</var> is a <a href=#focusable-area id=data-model:focusable-area-25>focusable area</a>, let <var>current
    object</var> be that <a href=#focusable-area id=data-model:focusable-area-26>focusable area</a>'s <a href=#control-group id=data-model:control-group-16>control group</a>'s <a href=#control-group-owner-object id=data-model:control-group-owner-object-13>owner object</a>, and return to the step labeled
    <i>loop</i>.</p>

    <p>Otherwise, if <var>current object</var> is a <code id=data-model:document-9><a href=dom.html#document>Document</a></code> in a <a id=data-model:nested-browsing-context-5 href=browsers.html#nested-browsing-context>nested browsing
    context</a>, let <var>current object</var> be its <a id=data-model:browsing-context-container-6 href=browsers.html#browsing-context-container>browsing context container</a>,
    and return to the step labeled <i>loop</i>.</p>

   <li>

    <p>Return <var>output</var>.</p>

    <p class=note>The chain starts with <var>subject</var> and (if <var>subject</var> is or can be the <a href=#currently-focused-area-of-a-top-level-browsing-context id=data-model:currently-focused-area-of-a-top-level-browsing-context-3>currently focused area of a top-level browsing
    context</a>) continues up the focus hierarchy up to the <code id=data-model:document-10><a href=dom.html#document>Document</a></code> of the
    <a id=data-model:top-level-browsing-context-2 href=browsers.html#top-level-browsing-context>top-level browsing context</a>.</p>

   </ol>

  


  <h4 id=the-tabindex-attribute><span class=secno>6.4.3</span> The <code id=the-tabindex-attribute:attr-tabindex><a href=#attr-tabindex>tabindex</a></code> attribute<a href=#the-tabindex-attribute class=self-link></a></h4>

  <p>The <dfn id=attr-tabindex><code>tabindex</code></dfn> content attribute allows authors to
  indicate that an element is supposed to be <a href=#focusable-area id=the-tabindex-attribute:focusable-area>focusable</a>, and
  whether it is supposed to be reachable using <a href=#sequential-focus-navigation id=the-tabindex-attribute:sequential-focus-navigation>sequential focus navigation</a> and, if so,
  what is to be the relative order of the element for the purposes of sequential focus navigation.
  The name "tab index" comes from the common use of the "tab" key to navigate through the focusable
  elements. The term "tabbing" refers to moving forward through the focusable elements that can be
  reached using sequential focus navigation.<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> tabindex-attr<span class="chrome yes"><span>Chrome</span> <span>15+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>3.2+</span></span><span class="firefox yes"><span>Firefox</span> <span>4+</span></span><span class="ie yes"><span>IE</span> <span>7+</span></span><span class="safari yes"><span>Safari</span> <span>5.1+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="opera yes"><span>Opera</span> <span>9.5+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=tabindex-attr">caniuse.com</a></div>

  <p>When the attribute is omitted, the user agent applies defaults. (There is no way to make an
  element that is <a id=the-tabindex-attribute:being-rendered href=rendering.html#being-rendered>being rendered</a> be not focusable at all without <a href=semantics-other.html#concept-element-disabled id=the-tabindex-attribute:concept-element-disabled>disabling</a> it or making it <a href=#inert id=the-tabindex-attribute:inert>inert</a>.)</p>

  <p>The <code id=the-tabindex-attribute:attr-tabindex-2><a href=#attr-tabindex>tabindex</a></code> attribute, if specified, must have a value
  that is a <a id=the-tabindex-attribute:valid-integer href=common-microsyntaxes.html#valid-integer>valid integer</a>. Positive numbers specify the relative position of the
  element's <a href=#focusable-area id=the-tabindex-attribute:focusable-area-2>focusable areas</a> in the <a href=#sequential-focus-navigation-order id=the-tabindex-attribute:sequential-focus-navigation-order>sequential focus
  navigation order</a>, and negative numbers indicate that the control is to be unreachable by
  <a href=#sequential-focus-navigation id=the-tabindex-attribute:sequential-focus-navigation-2>sequential focus navigation</a>.</p>

  <p>Developers should use caution when using values other than 0 or −1 for their <code id=the-tabindex-attribute:attr-tabindex-3><a href=#attr-tabindex>tabindex</a></code> attributes as this is complicated to do correctly.</p>

  

  <p>Each element can have a <dfn id=specially-focusable>tabindex focus flag</dfn> set, as defined
  below. This flag is a factor that contributes towards determining whether an element is a
  <a href=#focusable-area id=the-tabindex-attribute:focusable-area-3>focusable area</a>, as described in the previous section.</p>

  <p>If the <code id=the-tabindex-attribute:attr-tabindex-4><a href=#attr-tabindex>tabindex</a></code> attribute is specified on an element, it
  must be parsed using the <a id=the-tabindex-attribute:rules-for-parsing-integers href=common-microsyntaxes.html#rules-for-parsing-integers>rules for parsing integers</a>. The attribute's values, or lack
  thereof, must be interpreted as follows:</p>

  <dl><dt>If the attribute is omitted or parsing the value returns an error<dd>

    <p>The user agent should follow platform conventions to determine if the element's
    <a href=#specially-focusable id=the-tabindex-attribute:specially-focusable>tabindex focus flag</a> is set and, if so, whether the element and any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-4>focusable areas</a> that have the element as their <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor>DOM anchor</a> can
    be reached using <a href=#sequential-focus-navigation id=the-tabindex-attribute:sequential-focus-navigation-3>sequential focus navigation</a>, and if so, what their relative
    position in the <a href=#sequential-focus-navigation-order id=the-tabindex-attribute:sequential-focus-navigation-order-2>sequential focus navigation order</a> is to be.</p>

    <p>Modulo platform conventions, it is suggested that for the following elements, the
    <a href=#specially-focusable id=the-tabindex-attribute:specially-focusable-2>tabindex focus flag</a> be set:</p>

    <ul><li><code id=the-tabindex-attribute:the-a-element><a href=text-level-semantics.html#the-a-element>a</a></code> elements that have an <code id=the-tabindex-attribute:attr-hyperlink-href><a href=links.html#attr-hyperlink-href>href</a></code>
     attribute<li><code id=the-tabindex-attribute:the-link-element><a href=semantics.html#the-link-element>link</a></code> elements that have an <code id=the-tabindex-attribute:attr-link-href><a href=semantics.html#attr-link-href>href</a></code> attribute<li><code id=the-tabindex-attribute:the-button-element><a href=form-elements.html#the-button-element>button</a></code> elements<li><code id=the-tabindex-attribute:the-input-element><a href=input.html#the-input-element>input</a></code> elements whose <code id=the-tabindex-attribute:attr-input-type><a href=input.html#attr-input-type>type</a></code> attribute are
     not in the <a href="input.html#hidden-state-(type=hidden)" id="the-tabindex-attribute:hidden-state-(type=hidden)">Hidden</a> state<li><code id=the-tabindex-attribute:the-select-element><a href=form-elements.html#the-select-element>select</a></code> elements<li><code id=the-tabindex-attribute:the-textarea-element><a href=form-elements.html#the-textarea-element>textarea</a></code> elements<li><code id=the-tabindex-attribute:the-summary-element><a href=interactive-elements.html#the-summary-element>summary</a></code> elements that are the first <code id=the-tabindex-attribute:the-summary-element-2><a href=interactive-elements.html#the-summary-element>summary</a></code> element child of a
     <code id=the-tabindex-attribute:the-details-element><a href=interactive-elements.html#the-details-element>details</a></code> element<li>Elements with a <code id=the-tabindex-attribute:the-draggable-attribute><a href=dnd.html#the-draggable-attribute>draggable</a></code> attribute set, if that would
     enable the user agent to allow the user to begin a drag operations for those elements without
     the use of a pointing device<li><a href=https://w3c.github.io/editing/execCommand.html#editing-host id=the-tabindex-attribute:editing-host data-x-internal=editing-host>Editing hosts</a><li><a href=browsers.html#browsing-context-container id=the-tabindex-attribute:browsing-context-container>Browsing context containers</a></ul>

   <dt id=negative-tabindex>If the value is a negative integer<dd>

    <p>The user agent must set the element's <a href=#specially-focusable id=the-tabindex-attribute:specially-focusable-3>tabindex focus flag</a>, but should omit the
    element from the <a href=#sequential-focus-navigation-order id=the-tabindex-attribute:sequential-focus-navigation-order-3>sequential focus navigation order</a>.</p>

    <p class=note>One valid reason to ignore the requirement that sequential focus navigation not
    allow the author to lead to the element would be if the user's only mechanism for moving the
    focus is sequential focus navigation. For instance, a keyboard-only user would be unable to
    click on a text control with a negative <code id=the-tabindex-attribute:attr-tabindex-5><a href=#attr-tabindex>tabindex</a></code>, so that
    user's user agent would be well justified in allowing the user to tab to the control
    regardless.</p>

   <dt>If the value is a zero<dd>

    <p>The user agent must set the element's <a href=#specially-focusable id=the-tabindex-attribute:specially-focusable-4>tabindex focus flag</a>, should allow the
    element and any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-5>focusable areas</a> that have the element as their
    <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-2>DOM anchor</a> to be reached using <a href=#sequential-focus-navigation id=the-tabindex-attribute:sequential-focus-navigation-4>sequential focus navigation</a>, following
    platform conventions to determine the element's relative position in the <a href=#sequential-focus-navigation-order id=the-tabindex-attribute:sequential-focus-navigation-order-4>sequential focus
    navigation order</a>.</p>

   <dt>If the value is greater than zero<dd>

    <p>The user agent must set the element's <a href=#specially-focusable id=the-tabindex-attribute:specially-focusable-5>tabindex focus flag</a>, should allow the
    element and any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-6>focusable areas</a> that have the element as their
    <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-3>DOM anchor</a> to be reached using sequential focus navigation, and should place the element
    — referenced as <var>candidate</var> below — and the aforementioned <a href=#focusable-area id=the-tabindex-attribute:focusable-area-7>focusable areas</a> in the <a href=#sequential-focus-navigation id=the-tabindex-attribute:sequential-focus-navigation-5>sequential focus navigation</a>
    order so that, relative to other <a href=#focusable-area id=the-tabindex-attribute:focusable-area-8>focusable areas</a> in the
    <a href=#sequential-focus-navigation-order id=the-tabindex-attribute:sequential-focus-navigation-order-5>sequential focus navigation order</a>, they are:</p>

    <ul><li>before any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-9>focusable area</a> whose <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-4>DOM anchor</a> is an element whose <code id=the-tabindex-attribute:attr-tabindex-6><a href=#attr-tabindex>tabindex</a></code> attribute has been omitted or whose value, when parsed,
     returns an error,<li>before any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-10>focusable area</a> whose <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-5>DOM anchor</a> is an element whose <code id=the-tabindex-attribute:attr-tabindex-7><a href=#attr-tabindex>tabindex</a></code> attribute has a value equal to or less than zero,<li>after any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-11>focusable area</a> whose <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-6>DOM anchor</a> is an element whose <code id=the-tabindex-attribute:attr-tabindex-8><a href=#attr-tabindex>tabindex</a></code> attribute has a value greater than zero but less than
     the value of the <code id=the-tabindex-attribute:attr-tabindex-9><a href=#attr-tabindex>tabindex</a></code> attribute on <var>candidate</var>,<li>after any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-12>focusable area</a> whose <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-7>DOM anchor</a> is an element whose <code id=the-tabindex-attribute:attr-tabindex-10><a href=#attr-tabindex>tabindex</a></code> attribute has a value equal to the value of the <code id=the-tabindex-attribute:attr-tabindex-11><a href=#attr-tabindex>tabindex</a></code> attribute on <var>candidate</var> but that is
     earlier in the document in <a id=the-tabindex-attribute:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a> than <var>candidate</var>,<li>before any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-13>focusable area</a> whose <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-8>DOM anchor</a> is an element whose <code id=the-tabindex-attribute:attr-tabindex-12><a href=#attr-tabindex>tabindex</a></code> attribute has a value equal to the value of the <code id=the-tabindex-attribute:attr-tabindex-13><a href=#attr-tabindex>tabindex</a></code> attribute on <var>candidate</var> but that is
     later in the document in <a id=the-tabindex-attribute:tree-order-2 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a> than <var>candidate</var>, and<li>before any <a href=#focusable-area id=the-tabindex-attribute:focusable-area-14>focusable area</a> whose <a href=#dom-anchor id=the-tabindex-attribute:dom-anchor-9>DOM anchor</a> is an element whose <code id=the-tabindex-attribute:attr-tabindex-14><a href=#attr-tabindex>tabindex</a></code> attribute has a value greater than the value of the
     <code id=the-tabindex-attribute:attr-tabindex-15><a href=#attr-tabindex>tabindex</a></code> attribute on <var>candidate</var>.</ul>

   </dl>

  <p>An element with the <code id=the-tabindex-attribute:attr-tabindex-16><a href=#attr-tabindex>tabindex</a></code> attribute specified is
  <a id=the-tabindex-attribute:interactive-content-2 href=dom.html#interactive-content-2>interactive content</a>.</p>

  <p>The <dfn id=dom-tabindex><code>tabIndex</code></dfn> IDL attribute must
  <a id=the-tabindex-attribute:reflect href=common-dom-interfaces.html#reflect>reflect</a> the value of the <code id=the-tabindex-attribute:attr-tabindex-17><a href=#attr-tabindex>tabindex</a></code> content
  attribute. Its default value is 0 for elements that are focusable and −1 for elements that
  are not focusable.</p>

  


  

  <h4 id=focus-processing-model><span class=secno>6.4.4</span> <span id=processing-model-5></span>Processing model<a href=#focus-processing-model class=self-link></a></h4>

  <p>The <dfn id=focusing-steps data-export="">focusing steps</dfn> for an object <var>new focus target</var> that is
  either a <a href=#focusable-area id=focus-processing-model:focusable-area>focusable area</a>, or an element that is not a <a href=#focusable-area id=focus-processing-model:focusable-area-2>focusable area</a>, or
  a <a id=focus-processing-model:browsing-context href=browsers.html#browsing-context>browsing context</a>, are as follows. They can optionally be run with a <i>fallback
  target</i>.</p>

  <ol><li>

    <p>If <var>new focus target</var> is neither a <code id=focus-processing-model:the-dialog-element><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element that has an
    <code id=focus-processing-model:attr-dialog-open><a href=interactive-elements.html#attr-dialog-open>open</a></code> attribute specified and that is <a id=focus-processing-model:being-rendered href=rendering.html#being-rendered>being
    rendered</a> (i.e. that is a <a href=#control-group-owner-object id=focus-processing-model:control-group-owner-object>control group owner object</a>), nor a <a href=#focusable-area id=focus-processing-model:focusable-area-3>focusable
    area</a>, then run the first matching set of steps from the following list:</p>

    <dl class=switch><dt>If <var>new focus target</var> is an <code id=focus-processing-model:the-area-element><a href=image-maps.html#the-area-element>area</a></code> element with one or more
     shapes that are <a href=#focusable-area id=focus-processing-model:focusable-area-4>focusable areas</a><dd>

      <p>Let <var>new focus target</var> be the shape corresponding to the first
      <code id=focus-processing-model:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element in <a id=focus-processing-model:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a> that uses the image map to which the <code id=focus-processing-model:the-area-element-2><a href=image-maps.html#the-area-element>area</a></code>
      element belongs.</p>

     <dt>If <var>new focus target</var> is an element with one or more scrollable regions
     that are <a href=#focusable-area id=focus-processing-model:focusable-area-5>focusable areas</a><dd>

      <p>Let <var>new focus target</var> be the element's first scrollable region,
      according to a pre-order, depth-first traversal of the box tree. <a href=references.html#refsCSS>[CSS]</a></p>

     <dt>If <var>new focus target</var> is the <a id=focus-processing-model:document-element href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a> of its
     <code id=focus-processing-model:document><a href=dom.html#document>Document</a></code><dd>

      <p>Let <var>new focus target</var> be the <code id=focus-processing-model:document-2><a href=dom.html#document>Document</a></code>'s <a id=focus-processing-model:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>.</p>

     <dt>If <var>new focus target</var> is a <a id=focus-processing-model:browsing-context-2 href=browsers.html#browsing-context>browsing context</a><dd>

      <p>Let <var>new focus target</var> be the <a id=focus-processing-model:browsing-context-3 href=browsers.html#browsing-context>browsing context</a>'s
      <a id=focus-processing-model:active-document href=browsers.html#active-document>active document</a>.</p>

     <dt>If <var>new focus target</var> is a <a id=focus-processing-model:browsing-context-container href=browsers.html#browsing-context-container>browsing context container</a> with a non-null
     <a id=focus-processing-model:nested-browsing-context href=browsers.html#nested-browsing-context>nested browsing context</a><dd>

      <p>Let <var>new focus target</var> be the <a id=focus-processing-model:browsing-context-container-2 href=browsers.html#browsing-context-container>browsing context container</a>'s <a id=focus-processing-model:nested-browsing-context-2 href=browsers.html#nested-browsing-context>nested browsing context</a>'s
      <a id=focus-processing-model:active-document-2 href=browsers.html#active-document>active document</a>.</p>

     <dt>Otherwise<dd>

      <p>If no <i>fallback target</i> was specified, abort the <a href=#focusing-steps id=focus-processing-model:focusing-steps>focusing steps</a>.</p>

      <p>Otherwise, let <var>new focus target</var> be the <i>fallback target</i>.</p>

     </dl>

   <li>

    <p>If <var>new focus target</var> is a <a href=#control-group-owner-object id=focus-processing-model:control-group-owner-object-2>control group owner object</a> that is
    not a <a href=#focusable-area id=focus-processing-model:focusable-area-6>focusable area</a>, but does have a <a href=#dialog-group id=focus-processing-model:dialog-group>dialog group</a>, and that <a href=#dialog-group id=focus-processing-model:dialog-group-2>dialog group</a>
    has a designated <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group>focused dialog</a>, then
    let <var>new focus target</var> be the <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-2>focused dialog of the dialog
    group</a>, and redo this step.</p>

    <p>Otherwise, if <var>new focus target</var> is a <a href=#control-group-owner-object id=focus-processing-model:control-group-owner-object-3>control group owner
    object</a> that is not a <a href=#focusable-area id=focus-processing-model:focusable-area-7>focusable area</a>, and its <a href=#control-group id=focus-processing-model:control-group>control group</a> is not empty,
    then designate <var>new focus target</var> as the <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group>focused area of the control
    group</a>, and redo this step.</p>

    
    <p>Otherwise, if <var>new focus target</var> is a <a id=focus-processing-model:browsing-context-container-3 href=browsers.html#browsing-context-container>browsing context container</a> with
    non-null <a id=focus-processing-model:nested-browsing-context-3 href=browsers.html#nested-browsing-context>nested browsing context</a>, then let <var>new focus target</var> be the
    <a id=focus-processing-model:nested-browsing-context-4 href=browsers.html#nested-browsing-context>nested browsing context</a>'s <a id=focus-processing-model:active-document-3 href=browsers.html#active-document>active document</a>, and redo this step.</p>

    <p class=note>A <code id=focus-processing-model:the-dialog-element-2><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element can be both a <a href=#control-group-owner-object id=focus-processing-model:control-group-owner-object-4>control group owner
    object</a> and a <a href=#focusable-area id=focus-processing-model:focusable-area-8>focusable area</a>, if it has both an <code id=focus-processing-model:attr-dialog-open-2><a href=interactive-elements.html#attr-dialog-open>open</a></code> attribute specified and a <code id=focus-processing-model:attr-tabindex><a href=#attr-tabindex>tabindex</a></code> attribute specified and is <a id=focus-processing-model:being-rendered-2 href=rendering.html#being-rendered>being
    rendered</a>.</p>

   <li><p>If <var>new focus target</var> is a <a href=#focusable-area id=focus-processing-model:focusable-area-9>focusable area</a> and its <a href=#dom-anchor id=focus-processing-model:dom-anchor>DOM
   anchor</a> is <a href=#inert id=focus-processing-model:inert>inert</a>, then abort these steps.<li><p>If <var>new focus target</var> is the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context>currently focused area of a
   top-level browsing context</a>, then abort these steps.<li><p>Let <var>old chain</var> be the <a href=#focus-chain id=focus-processing-model:focus-chain>focus chain</a> of the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-2>currently focused area of the
   top-level browsing context</a> in which <var>new focus target</var> finds
   itself.<li><p>Let <var>new chain</var> be the <a href=#focus-chain id=focus-processing-model:focus-chain-2>focus chain</a> of <var>new
   focus target</var>.<li><p>Run the <a href=#focus-update-steps id=focus-processing-model:focus-update-steps>focus update steps</a> with <var>old chain</var>, <var>new chain</var>, and <var>new focus target</var> respectively.</ol>

  <p>User agents must <a id=focus-processing-model:immediately href=infrastructure.html#immediately>immediately</a> run the <a href=#focusing-steps id=focus-processing-model:focusing-steps-2>focusing steps</a> for a <a href=#focusable-area id=focus-processing-model:focusable-area-10>focusable area</a>,
  <code id=focus-processing-model:the-dialog-element-3><a href=interactive-elements.html#the-dialog-element>dialog</a></code>, or <a id=focus-processing-model:browsing-context-4 href=browsers.html#browsing-context>browsing context</a> <var>candidate</var> whenever the
  user attempts to move the focus to <var>candidate</var>.</p>

  <p>The <dfn id=unfocusing-steps>unfocusing steps</dfn> for an object <var>old focus target</var> that is
  either a <a href=#focusable-area id=focus-processing-model:focusable-area-11>focusable area</a> or an element that is not a <a href=#focusable-area id=focus-processing-model:focusable-area-12>focusable area</a> are as
  follows:</p>

  <ol><li><p>If <var>old focus target</var> is <a href=#inert id=focus-processing-model:inert-2>inert</a>, then abort these
   steps.<li>

    <p>If <var>old focus target</var> is an <code id=focus-processing-model:the-area-element-3><a href=image-maps.html#the-area-element>area</a></code> element and one of its shapes is the
    <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-3>currently focused area of a top-level browsing context</a>, or, if <var>old focus
    target</var> is an element with one or more scrollable regions, and one of them is the
    <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-4>currently focused area of a top-level browsing context</a>, then let <var>old focus
    target</var> be that <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-5>currently focused area of a top-level browsing context</a>.</p>

   <li><p>Let <var>old chain</var> be the <a href=#focus-chain id=focus-processing-model:focus-chain-3>focus chain</a> of the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-6>currently
   focused area of a top-level browsing context</a>.<li><p>If <var>old focus target</var> is not one of the entries in <var>old
   chain</var>, then abort these steps.<li>

    <p>If <var>old focus target</var> is a <code id=focus-processing-model:the-dialog-element-4><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in a <a href=#dialog-group id=focus-processing-model:dialog-group-3>dialog group</a>, and
    the <a href=#dialog-group-manager id=focus-processing-model:dialog-group-manager>dialog group manager</a> has a non-empty <a href=#control-group id=focus-processing-model:control-group-2>control group</a>, then let
    <var>new focus target</var> be the designated <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-2>focused area of that focus group</a>.</p>

    <p>Otherwise, if <var>old focus target</var> is a <a href=#focusable-area id=focus-processing-model:focusable-area-13>focusable area</a>, then let <var>new
    focus target</var> be the first <a href=#focusable-area id=focus-processing-model:focusable-area-14>focusable area</a> of its <a href=#control-group id=focus-processing-model:control-group-3>control group</a>
    (if the <a href=#control-group-owner-object id=focus-processing-model:control-group-owner-object-5>control group owner object</a> is a <code id=focus-processing-model:document-3><a href=dom.html#document>Document</a></code>, this will always be
    a <a id=focus-processing-model:viewport-2 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>).</p>

    <p>Otherwise, let <var>new focus target</var> be null.</p>

   <li><p>If <var>new focus target</var> is not null, then run the <a href=#focusing-steps id=focus-processing-model:focusing-steps-3>focusing
   steps</a> for <var>new focus target</var>.</ol>

  <p>When the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-7>currently focused area of a top-level browsing context</a> is somehow
  unfocused without another element being explicitly focused in its stead, the user agent must
  <a id=focus-processing-model:immediately-2 href=infrastructure.html#immediately>immediately</a> run the <a href=#unfocusing-steps id=focus-processing-model:unfocusing-steps>unfocusing steps</a> for that object.</p>

  <p class=note>The <a href=#unfocusing-steps id=focus-processing-model:unfocusing-steps-2>unfocusing steps</a> do not always result in the focus changing, even
  when applied to the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-8>currently focused area of a top-level browsing context</a>. For
  example, if the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-9>currently focused area of a top-level browsing context</a> is a
  <a id=focus-processing-model:viewport-3 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>, then it will usually keep its focus regardless until another
  <a href=#focusable-area id=focus-processing-model:focusable-area-15>focusable area</a> is explicitly focused with the <a href=#focusing-steps id=focus-processing-model:focusing-steps-4>focusing steps</a>.</p>

  <hr>

  <p>When a <a href=#focusable-area id=focus-processing-model:focusable-area-16>focusable area</a> is added to an empty <a href=#control-group id=focus-processing-model:control-group-4>control group</a>, it must be designated
  the <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-3>focused area of the control group</a>.</p>

  <p>When a <a href=#dialog-group id=focus-processing-model:dialog-group-4>dialog group</a> is formed, if the <a href=#dialog-group-manager id=focus-processing-model:dialog-group-manager-2>dialog group manager</a> has an empty
  <a href=#control-group id=focus-processing-model:control-group-5>control group</a>, the first non-<a href=#inert id=focus-processing-model:inert-3>inert</a> <code id=focus-processing-model:the-dialog-element-5><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in the <a href=#dialog-group id=focus-processing-model:dialog-group-5>dialog
  group</a>, if any, or else the first <code id=focus-processing-model:the-dialog-element-6><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in the <a href=#dialog-group id=focus-processing-model:dialog-group-6>dialog group</a> regardless of
  <a href=#inert id=focus-processing-model:inert-4>inertness</a>, must be designated the <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-3>focused dialog of the dialog
  group</a>.</p>

  <p><dfn id=focus-fixup-rule-one>Focus fixup rule one</dfn>: When the designated <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-4>focused area of a control group</a> is removed from that <a href=#control-group id=focus-processing-model:control-group-6>control group</a> in
  some way (e.g. it stops being a <a href=#focusable-area id=focus-processing-model:focusable-area-17>focusable area</a>, it is removed from the DOM, it
  becomes <a href=#expressly-inert id=focus-processing-model:expressly-inert>expressly inert</a>, etc), and the <a href=#control-group id=focus-processing-model:control-group-7>control group</a> is still not
  empty: designate the first non-<a href=#inert id=focus-processing-model:inert-5>inert</a> <a href=#focusable-area id=focus-processing-model:focusable-area-18>focusable area</a> in that
  <a href=#control-group id=focus-processing-model:control-group-8>control group</a> to be the new <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-5>focused area of the control group</a>, if any;
  if they are all <a href=#inert id=focus-processing-model:inert-6>inert</a>, then designate the first <a href=#focusable-area id=focus-processing-model:focusable-area-19>focusable area</a> in that
  <a href=#control-group id=focus-processing-model:control-group-9>control group</a> to be the new <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-6>focused area of the control group</a> regardless
  of <a href=#inert id=focus-processing-model:inert-7>inertness</a>. If such a removal instead results in the <a href=#control-group id=focus-processing-model:control-group-10>control
  group</a> being empty, then there is simply no longer a <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-7>focused area of the control
  group</a>.</p>

  <p class=example>For example, this might happen because an element is removed from its
  <code id=focus-processing-model:document-4><a href=dom.html#document>Document</a></code>, or has a <code id=focus-processing-model:the-hidden-attribute><a href=#the-hidden-attribute>hidden</a></code> attribute added. It might
  also happen to an <code id=focus-processing-model:the-input-element><a href=input.html#the-input-element>input</a></code> element when the element gets <a href=form-control-infrastructure.html#concept-fe-disabled id=focus-processing-model:concept-fe-disabled>disabled</a>.</p>

  <p class=example>In a <code id=focus-processing-model:document-5><a href=dom.html#document>Document</a></code> without <code id=focus-processing-model:the-dialog-element-7><a href=interactive-elements.html#the-dialog-element>dialog</a></code> elements, whose <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-8>focused area</a> is a <code id=focus-processing-model:the-button-element><a href=form-elements.html#the-button-element>button</a></code> element,
  removing, disabling, or hiding that button would cause the page's new <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-9>focused area</a> to be the <a id=focus-processing-model:viewport-4 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> of the
  <code id=focus-processing-model:document-6><a href=dom.html#document>Document</a></code>. This would, in turn, be reflected through the <code id=focus-processing-model:dom-document-activeelement><a href=#dom-document-activeelement>activeElement</a></code> API as <a id=focus-processing-model:the-body-element-2 href=dom.html#the-body-element-2>the body
  element</a>.</p>

  <p><dfn id=focus-fixup-rule-two>Focus fixup rule two</dfn>: When a <a href=#dialog-group id=focus-processing-model:dialog-group-7>dialog group</a> has no designated <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-4>focused
  dialog of the dialog group</a>, and its <a href=#dialog-group-manager id=focus-processing-model:dialog-group-manager-3>dialog group manager</a>'s <a href=#control-group id=focus-processing-model:control-group-11>control
  group</a> changes from being non-empty to being empty, the first non-<a href=#inert id=focus-processing-model:inert-8>inert</a>
  <code id=focus-processing-model:the-dialog-element-8><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in the <a href=#dialog-group id=focus-processing-model:dialog-group-8>dialog group</a>, if any, or else the first <code id=focus-processing-model:the-dialog-element-9><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in
  the <a href=#dialog-group id=focus-processing-model:dialog-group-9>dialog group</a> regardless of <a href=#inert id=focus-processing-model:inert-9>inertness</a>, must be designated
  the <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-5>focused dialog of the dialog group</a>.</p>

  <p><dfn id=focus-fixup-rule-three>Focus fixup rule three</dfn>: When the designated <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-6>focused dialog of a dialog group</a> is removed from that <a href=#dialog-group id=focus-processing-model:dialog-group-10>dialog
  group</a> in some way (e.g. it stops <a id=focus-processing-model:being-rendered-3 href=rendering.html#being-rendered>being rendered</a>, it loses its <code id=focus-processing-model:attr-dialog-open-3><a href=interactive-elements.html#attr-dialog-open>open</a></code> attribute, it becomes <a href=#expressly-inert id=focus-processing-model:expressly-inert-2>expressly inert</a>, etc),
  and there is still a <a href=#dialog-group id=focus-processing-model:dialog-group-11>dialog group</a> (because the <code id=focus-processing-model:the-dialog-element-10><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in question was
  not the last <code id=focus-processing-model:the-dialog-element-11><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in that <a href=#dialog-group id=focus-processing-model:dialog-group-12>dialog group</a>): if the <a href=#dialog-group id=focus-processing-model:dialog-group-13>dialog
  group</a>'s <a href=#dialog-group-manager id=focus-processing-model:dialog-group-manager-4>manager</a>'s <a href=#control-group id=focus-processing-model:control-group-12>control group</a> is
  non-empty, let there be no designated <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-7>focused dialog of the dialog group</a> any more;
  otherwise (in the case that the <a href=#control-group id=focus-processing-model:control-group-13>control group</a> is empty), designate the first
  non-<a href=#inert id=focus-processing-model:inert-10>inert</a> <code id=focus-processing-model:the-dialog-element-12><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in the <a href=#dialog-group id=focus-processing-model:dialog-group-14>dialog group</a> to be the
  <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-8>focused dialog of the dialog group</a>, or, if they are all <a href=#inert id=focus-processing-model:inert-11>inert</a>, designate
  the first <code id=focus-processing-model:the-dialog-element-13><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in the <a href=#dialog-group id=focus-processing-model:dialog-group-15>dialog group</a> to be the <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-9>focused dialog of
  the dialog group</a> regardless of <a href=#inert id=focus-processing-model:inert-12>inertness</a>.</p>

  <p>When the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-10>currently focused area of a top-level browsing context</a> was a <a href=#focusable-area id=focus-processing-model:focusable-area-20>focusable
  area</a> but stops being a <a href=#focusable-area id=focus-processing-model:focusable-area-21>focusable area</a>, or when it was a <code id=focus-processing-model:the-dialog-element-14><a href=interactive-elements.html#the-dialog-element>dialog</a></code> in a
  <a href=#dialog-group id=focus-processing-model:dialog-group-16>dialog group</a> and stops being part of that <a href=#dialog-group id=focus-processing-model:dialog-group-17>dialog group</a>, or when it
  starts being <a href=#inert id=focus-processing-model:inert-13>inert</a>, the user agent must run the following steps:</p>

  <ol><li><p>Let <var>old focus target</var> be whatever the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-11>currently focused area of the top-level browsing
   context</a> was immediately before this algorithm became applicable (e.g. before the element
   was disabled, or the dialog was closed, or whatever caused this algorithm to run).<li><p>Let <var>old chain</var> be the <a href=#focus-chain id=focus-processing-model:focus-chain-4>focus chain</a> of the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-12>currently focused area of the
   top-level browsing context</a> at the same time.<li><p>Make sure that the changes implied by the focus fixup rules <a href=#focus-fixup-rule-one id=focus-processing-model:focus-fixup-rule-one>one</a>, <a href=#focus-fixup-rule-two id=focus-processing-model:focus-fixup-rule-two>two</a>, and <a href=#focus-fixup-rule-three id=focus-processing-model:focus-fixup-rule-three>three</a> above are applied.<li><p>Let <var>new focus target</var> be the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-13>currently focused area of a
   top-level browsing context</a>.<li><p>If <var>old focus target</var> and <var>new focus target</var> are the
   same, abort these steps.<li><p>Let <var>new chain</var> be the <a href=#focus-chain id=focus-processing-model:focus-chain-5>focus chain</a> of <var>new
   focus target</var>.<li><p>Run the <a href=#focus-update-steps id=focus-processing-model:focus-update-steps-2>focus update steps</a> with <var>old chain</var>, <var>new chain</var>, and <var>new focus target</var> respectively.</ol>

  <hr>

  <p>The <dfn id=focus-update-steps>focus update steps</dfn>, given an <var>old chain</var>, a <var>new chain</var>, and a <var>new focus target</var> respectively, are as
  follows:</p>

  <ol><li><p>If the last entry in <var>old chain</var> and the last entry in <var>new chain</var> are the same, pop the last entry from <var>old chain</var>
   and the last entry from <var>new chain</var> and redo this step.<li>

    <p>For each entry <var>entry</var> in <var>old chain</var>, in order, run
    these substeps:</p>

    <ol><li id=unfocus-causes-change-event><p>If <var>entry</var> is an <code id=focus-processing-model:the-input-element-2><a href=input.html#the-input-element>input</a></code>
     element, and the <code id=focus-processing-model:event-change><a href=indices.html#event-change>change</a></code> event <a href=input.html#concept-input-apply id=focus-processing-model:concept-input-apply>applies</a> to the element, and the element does not have a
     defined <a id=focus-processing-model:activation-behaviour href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation behavior</a>, and the user has changed the element's <a href=form-control-infrastructure.html#concept-fe-value id=focus-processing-model:concept-fe-value>value</a> or its list of <a href=input.html#concept-input-type-file-selected id=focus-processing-model:concept-input-type-file-selected>selected files</a> while the control was focused
     without committing that change (such that it is different to what it was when the control was
     first focused), then <a href=https://dom.spec.whatwg.org/#concept-event-fire id=focus-processing-model:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named <code id=focus-processing-model:event-change-2><a href=indices.html#event-change>change</a></code> at the element, with the <code id=focus-processing-model:dom-event-bubbles><a data-x-internal=dom-event-bubbles href=https://dom.spec.whatwg.org/#dom-event-bubbles>bubbles</a></code> attribute initialized to true.</p>

     <li>

      <p>If <var>entry</var> is an element, let <var>blur event target</var> be
      <var>entry</var>.</p>

      <p>If <var>entry</var> is a <code id=focus-processing-model:document-7><a href=dom.html#document>Document</a></code> object, let <var>blur
      event target</var> be that <code id=focus-processing-model:document-8><a href=dom.html#document>Document</a></code> object's <code id=focus-processing-model:window><a href=window-object.html#window>Window</a></code> object.</p>

      <p>Otherwise, let <var>blur event target</var> be null.</p>

     <li><p>If <var>entry</var> is the last entry in <var>old chain</var>, and
     <var>entry</var> is an <code id=focus-processing-model:element><a data-x-internal=element href=https://dom.spec.whatwg.org/#interface-element>Element</a></code>, and the last entry in <var>new
     chain</var> is also an <code id=focus-processing-model:element-2><a data-x-internal=element href=https://dom.spec.whatwg.org/#interface-element>Element</a></code>, then let <var>related blur target</var>
     be the last entry in <var>new chain</var>. Otherwise, let <var>related blur
     target</var> be null.<li>

      <p>If <var>blur event target</var> is not null, <a href=#fire-a-focus-event id=focus-processing-model:fire-a-focus-event>fire a focus event</a>
      named <code id=focus-processing-model:event-blur><a href=indices.html#event-blur>blur</a></code> at <var>blur event target</var>, with
      <var>related blur target</var> as the related target.</p>

      <p class=note>In some cases, e.g. if <var>entry</var> is an <code id=focus-processing-model:the-area-element-4><a href=image-maps.html#the-area-element>area</a></code>
      element's shape, a scrollable region, or a <a id=focus-processing-model:viewport-5 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>, no event is fired.</p>

     </ol>

   <li><p>Apply any relevant platform-specific conventions for focusing <var>new focus
   target</var>. (For example, some platforms select the contents of a text control when that
   control is focused.)<li>

    <p>For each entry <var>entry</var> in <var>new chain</var>, in reverse
    order, run these substeps:</p>

    <ol><li><p>If <var>entry</var> is a <code id=focus-processing-model:the-dialog-element-15><a href=interactive-elements.html#the-dialog-element>dialog</a></code> element: let <var>entry</var> be the
     designated <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-10>focused dialog of its dialog
     group</a>.<li>

      <p>If <var>entry</var> is a <a href=#focusable-area id=focus-processing-model:focusable-area-22>focusable area</a>: designate <var>entry</var> as the
      <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-10>focused area of the control group</a>. If its <a href=#control-group id=focus-processing-model:control-group-14>control group</a>'s <a href=#control-group-owner-object id=focus-processing-model:control-group-owner-object-6>owner object</a> is also a <a href=#dialog-group-manager id=focus-processing-model:dialog-group-manager-5>dialog group
      manager</a>, then let there be no designated <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-11>focused dialog</a> in that <a href=#dialog-group id=focus-processing-model:dialog-group-18>dialog group</a>.</p>

      <p class=note>It is possible for <var>entry</var> to be both a <code id=focus-processing-model:the-dialog-element-16><a href=interactive-elements.html#the-dialog-element>dialog</a></code>
      element and a <a href=#focusable-area id=focus-processing-model:focusable-area-23>focusable area</a>, in which case it is its own <a href=#control-group-owner-object id=focus-processing-model:control-group-owner-object-7>control group
      owner object</a>.</p>

     <li>

      <p>If <var>entry</var> is an element, let <var>focus event target</var> be
      <var>entry</var>.</p>

      <p>If <var>entry</var> is a <code id=focus-processing-model:document-9><a href=dom.html#document>Document</a></code> object, let <var>focus
      event target</var> be that <code id=focus-processing-model:document-10><a href=dom.html#document>Document</a></code> object's <code id=focus-processing-model:window-2><a href=window-object.html#window>Window</a></code> object.</p>

      <p>Otherwise, let <var>focus event target</var> be null.</p>

     <li><p>If <var>entry</var> is the last entry in <var>new chain</var>, and
     <var>entry</var> is an <code id=focus-processing-model:element-3><a data-x-internal=element href=https://dom.spec.whatwg.org/#interface-element>Element</a></code>, and the last entry in <var>old
     chain</var> is also an <code id=focus-processing-model:element-4><a data-x-internal=element href=https://dom.spec.whatwg.org/#interface-element>Element</a></code>, then let <var>related focus target</var>
     be the last entry in <var>old chain</var>. Otherwise, let <var>related
     focus target</var> be null.<li>

      <p>If <var>focus event target</var> is not null, <a href=#fire-a-focus-event id=focus-processing-model:fire-a-focus-event-2>fire a focus event</a>
      named <code id=focus-processing-model:event-focus><a href=indices.html#event-focus>focus</a></code> at <var>focus event target</var>, with
      <var>related focus target</var> as the related target.</p>

      <p class=note>In some cases, e.g. if <var>entry</var> is an <code id=focus-processing-model:the-area-element-5><a href=image-maps.html#the-area-element>area</a></code>
      element's shape, a scrollable region, or a <a id=focus-processing-model:viewport-6 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>, no event is fired.</p>

     </ol>

   </ol>

  <p>To <dfn id=fire-a-focus-event>fire a focus event</dfn> named <var>e</var> at an element <var>t</var> and with a given
  related target <var>r</var>, <a href=https://dom.spec.whatwg.org/#concept-event-fire id=focus-processing-model:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a> named
  <var>e</var> at <var>t</var>, using <code id=focus-processing-model:focusevent><a data-x-internal=focusevent href=https://w3c.github.io/uievents/#interface-FocusEvent>FocusEvent</a></code>, with the <code id=focus-processing-model:dom-focusevent-relatedtarget><a data-x-internal=dom-focusevent-relatedtarget href=https://w3c.github.io/uievents/#widl-FocusEvent-relatedTarget>relatedTarget</a></code> attribute initialized to <var>r</var>
  and the <code id=focus-processing-model:dom-uievent-view><a data-x-internal=dom-uievent-view href=https://w3c.github.io/uievents/#widl-UIEvent-view>view</a></code> attribute initialized to <var>t</var>'s
  <a id=focus-processing-model:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <code id=focus-processing-model:window-3><a href=window-object.html#window>Window</a></code> object.</p>

  <hr>

  <p>When a key event is to be routed in a <a id=focus-processing-model:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a>, the user agent
  must run the following steps:</p>

  

  <ol><li><p>Let <var>target area</var> be the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-14>currently focused area of the top-level browsing
   context</a>.<li><p>If <var>target area</var> is a <a href=#focusable-area id=focus-processing-model:focusable-area-24>focusable area</a>, let <var>target
   node</var> be <var>target area</var>'s <a href=#dom-anchor id=focus-processing-model:dom-anchor-2>DOM anchor</a>. Otherwise, <var>target area</var> is a <code id=focus-processing-model:the-dialog-element-17><a href=interactive-elements.html#the-dialog-element>dialog</a></code>; let <var>target node</var> be
   <var>target area</var>.<li>

    <p>If <var>target node</var> is a <code id=focus-processing-model:document-11><a href=dom.html#document>Document</a></code> that has a <a href=dom.html#the-body-element-2 id=focus-processing-model:the-body-element-2-2>body element</a>, then let <var>target node</var> be <a id=focus-processing-model:the-body-element-2-3 href=dom.html#the-body-element-2>the body
    element</a> of that <code id=focus-processing-model:document-12><a href=dom.html#document>Document</a></code>.</p>

    <p>Otherwise, if <var>target node</var> is a <code id=focus-processing-model:document-13><a href=dom.html#document>Document</a></code> object that has a non-null
    <a id=focus-processing-model:document-element-2 href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a>, then let <var>target node</var> be that <a id=focus-processing-model:document-element-3 href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document
    element</a>.</p>

   <li>

    <p>If <var>target node</var> is not <a href=#inert id=focus-processing-model:inert-14>inert</a>, then:</p>

    <p class=note>It is possible for the <a href=#currently-focused-area-of-a-top-level-browsing-context id=focus-processing-model:currently-focused-area-of-a-top-level-browsing-context-15>currently focused area of a top-level browsing
    context</a> to be <a href=#inert id=focus-processing-model:inert-15>inert</a>, for example if a <a href=interactive-elements.html#dom-dialog-showmodal id=focus-processing-model:dom-dialog-showmodal>modal dialog is shown</a>, and then that <code id=focus-processing-model:the-dialog-element-18><a href=interactive-elements.html#the-dialog-element>dialog</a></code>
    element is made <a href=#inert id=focus-processing-model:inert-16>inert</a>. It is likely to be the result of a logic error in the
    application, though.</p>

    <ol><li><p>Let <var>canHandle</var> be the result of <a href=https://dom.spec.whatwg.org/#concept-event-dispatch id=focus-processing-model:concept-event-dispatch data-x-internal=concept-event-dispatch>dispatching</a> the key event at <var>target
     node</var>.<li><p>If <var>canHandle</var> is true, then let <var>target area</var> handle the key event.
     This might include <a href=webappapis.html#fire-a-click-event id=focus-processing-model:fire-a-click-event>firing a <code>click</code> event</a> at <var>target node</var>.</ol>

   </ol>

  <hr>

  <p>The <dfn id=has-focus-steps data-export="">has focus steps</dfn>, given a <code id=focus-processing-model:document-14><a href=dom.html#document>Document</a></code> object
  <var>target</var>, are as follows:</p>

  <ol><li><p>Let <var>candidate</var> be the <code id=focus-processing-model:document-15><a href=dom.html#document>Document</a></code> of the <a id=focus-processing-model:top-level-browsing-context-2 href=browsers.html#top-level-browsing-context>top-level browsing
   context</a>.<li><p>If <var>candidate</var> is <var>target</var>, return true and abort these steps.<li>

    <p>If <var>candidate</var> has a <a href=#dialog-group id=focus-processing-model:dialog-group-19>dialog group</a> with a designated <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-12>focused
    dialog of the dialog group</a>, then let <var>candidate</var> be the designated
    <a href=#focused-dialog-of-the-dialog-group id=focus-processing-model:focused-dialog-of-the-dialog-group-13>focused dialog of the dialog group</a>, and redo this step.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href=#control-group id=focus-processing-model:control-group-15>control group</a>, and the
    designated <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-11>focused area of the control group</a> is a <a id=focus-processing-model:browsing-context-container-4 href=browsers.html#browsing-context-container>browsing context
    container</a> with a non-null <a id=focus-processing-model:nested-browsing-context-5 href=browsers.html#nested-browsing-context>nested browsing context</a>, and the <a id=focus-processing-model:active-document-4 href=browsers.html#active-document>active
    document</a> of that <a id=focus-processing-model:browsing-context-container-5 href=browsers.html#browsing-context-container>browsing context container</a>'s <a id=focus-processing-model:nested-browsing-context-6 href=browsers.html#nested-browsing-context>nested browsing
    context</a> is <var>target</var>, then return true and abort these steps.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href=#control-group id=focus-processing-model:control-group-16>control group</a>, and the
    designated <a href=#focused-area-of-the-control-group id=focus-processing-model:focused-area-of-the-control-group-12>focused area of the control group</a> is a <a id=focus-processing-model:browsing-context-container-6 href=browsers.html#browsing-context-container>browsing context
    container</a> with a non-null <a id=focus-processing-model:nested-browsing-context-7 href=browsers.html#nested-browsing-context>nested browsing context</a>, then let
    <var>candidate</var> be the <a id=focus-processing-model:active-document-5 href=browsers.html#active-document>active document</a> of that <a id=focus-processing-model:browsing-context-container-7 href=browsers.html#browsing-context-container>browsing context
    container</a>'s <a id=focus-processing-model:nested-browsing-context-8 href=browsers.html#nested-browsing-context>nested browsing context</a>, and redo this step.</p>

    <p>Otherwise, return false and abort these steps.</p>

   </ol>



  <h4 id=sequential-focus-navigation><span class=secno>6.4.5</span> <dfn>Sequential focus navigation</dfn><a href=#sequential-focus-navigation class=self-link></a></h4>

  <p>Each <a href=#control-group id=sequential-focus-navigation:control-group>control group</a> has a <dfn id=sequential-focus-navigation-order>sequential focus navigation order</dfn>, which orders some
  or all of the <a href=#focusable-area id=sequential-focus-navigation:focusable-area>focusable areas</a> in the <a href=#control-group id=sequential-focus-navigation:control-group-2>control group</a>
  relative to each other. The order in the <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order>sequential focus navigation order</a> does not
  have to be related to the order in the <a href=#control-group id=sequential-focus-navigation:control-group-3>control group</a> itself. If a <a href=#focusable-area id=sequential-focus-navigation:focusable-area-2>focusable area</a> is
  omitted from the <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order-2>sequential focus navigation order</a> of its <a href=#control-group id=sequential-focus-navigation:control-group-4>control group</a>, then
  it is unreachable via <a href=#sequential-focus-navigation id=sequential-focus-navigation:sequential-focus-navigation>sequential focus navigation</a>.</p>

  <p>There can also be a <dfn id=sequential-focus-navigation-starting-point>sequential focus navigation starting point</dfn>. It is initially
  unset. The user agent may set it when the user indicates that it should be moved.</p>

  <p class=example>For example, the user agent could set it to the position of the user's click if
  the user clicks on the document contents.</p>

  <p>When the user requests that focus move from the <a href=#currently-focused-area-of-a-top-level-browsing-context id=sequential-focus-navigation:currently-focused-area-of-a-top-level-browsing-context>currently focused area of a top-level
  browsing context</a> to the next or previous <a href=#focusable-area id=sequential-focus-navigation:focusable-area-3>focusable area</a> (e.g. as the default action
  of pressing the <kbd><kbd>tab</kbd></kbd> key), or when the user requests that focus sequentially move to a
  <a id=sequential-focus-navigation:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a> in the first place (e.g. from the browser's location bar),
  the user agent must use the following algorithm:</p>

  <ol><li><p>Let <var>starting point</var> be the <a href=#currently-focused-area-of-a-top-level-browsing-context id=sequential-focus-navigation:currently-focused-area-of-a-top-level-browsing-context-2>currently focused area of a top-level
   browsing context</a>, if the user requested to move focus sequentially from there, or else the
   <a id=sequential-focus-navigation:top-level-browsing-context-2 href=browsers.html#top-level-browsing-context>top-level browsing context</a> itself, if the user instead requested to move focus from
   outside the <a id=sequential-focus-navigation:top-level-browsing-context-3 href=browsers.html#top-level-browsing-context>top-level browsing context</a>.<li><p>If there is a <a href=#sequential-focus-navigation-starting-point id=sequential-focus-navigation:sequential-focus-navigation-starting-point>sequential focus navigation starting point</a> defined and it is
   inside <var>starting point</var>, then let <var>starting point</var> be the <a href=#sequential-focus-navigation-starting-point id=sequential-focus-navigation:sequential-focus-navigation-starting-point-2>sequential
   focus navigation starting point</a> instead.<li>

    <p>Let <var>direction</var> be <i>forward</i> if the user requested the <em>next</em>
    control, and <i>backward</i> if the user requested the previous control.</p>

    <p class=note>Typically, pressing <kbd><kbd>tab</kbd></kbd> requests the next control, and pressing
    <kbd><kbd>shift</kbd>+<kbd>tab</kbd></kbd> requests the previous control.</p>

   <li>

    <p><i>Loop</i>: Let <var>selection mechanism</var> be <i>sequential</i> if the <var>starting
    point</var> is a <a id=sequential-focus-navigation:browsing-context href=browsers.html#browsing-context>browsing context</a> or if <var>starting point</var> is in its
    <a href=#control-group id=sequential-focus-navigation:control-group-5>control group</a>'s <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order-3>sequential focus navigation order</a>.</p>

    <p>Otherwise, <var>starting point</var> is not in its <a href=#control-group id=sequential-focus-navigation:control-group-6>control group</a>'s
    <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order-4>sequential focus navigation order</a>; let <var>selection mechanism</var> be
    <i>DOM</i>.</p>

   <li><p>Let <var>candidate</var> be the result of running the <a href=#sequential-navigation-search-algorithm id=sequential-focus-navigation:sequential-navigation-search-algorithm>sequential navigation search
   algorithm</a> with <var>starting point</var>, <var>direction</var>, and <var>selection
   mechanism</var> as the arguments.<li><p>If <var>candidate</var> is not null, then run the <a href=#focusing-steps id=sequential-focus-navigation:focusing-steps>focusing steps</a> for
   <var>candidate</var> and abort these steps.<li><p>Otherwise, unset the <a href=#sequential-focus-navigation-starting-point id=sequential-focus-navigation:sequential-focus-navigation-starting-point-3>sequential focus navigation starting point</a>.<li>

    <p>If <var>starting point</var> is the <a id=sequential-focus-navigation:top-level-browsing-context-4 href=browsers.html#top-level-browsing-context>top-level browsing context</a>, or a
    <a href=#focusable-area id=sequential-focus-navigation:focusable-area-4>focusable area</a> in the <a id=sequential-focus-navigation:top-level-browsing-context-5 href=browsers.html#top-level-browsing-context>top-level browsing context</a>, the user agent
    should transfer focus to its own controls appropriately (if any), honouring
    <var>direction</var>, and then abort these steps.</p>

    <p class=example>For example, if <var>direction</var> is <i>backward</i>, then the last
    focusable control before the browser's rendering area would be the control to focus.</p>

    <p>If the user agent has no focusable controls — a kiosk-mode browser, for instance
    — 
    then the user agent may instead restart these steps with the <var>starting point</var> being the
    <a id=sequential-focus-navigation:top-level-browsing-context-6 href=browsers.html#top-level-browsing-context>top-level browsing context</a> itself.</p>

    

   <li><p>Otherwise, <var>starting point</var> is a <a href=#focusable-area id=sequential-focus-navigation:focusable-area-5>focusable area</a> in a
   <a id=sequential-focus-navigation:nested-browsing-context href=browsers.html#nested-browsing-context>nested browsing context</a>. Let <var>starting point</var> be that
   <a id=sequential-focus-navigation:nested-browsing-context-2 href=browsers.html#nested-browsing-context>nested browsing context</a>'s <a id=sequential-focus-navigation:browsing-context-container href=browsers.html#browsing-context-container>browsing context container</a>, and return to the
   step labeled <i>loop</i>.</p>
    
   </ol>


  <p>The <dfn id=sequential-navigation-search-algorithm>sequential navigation search algorithm</dfn> consists of the following steps. This
  algorithm takes three arguments: <var>starting point</var>, <var>direction</var>,
  and <var>selection mechanism</var>.</p>

  <ol><li>

    <p>Pick the appropriate cell from the following table, and follow the instructions in that
    cell.</p>

    <p>The appropriate cell is the one that is from the column whose header describes <var>direction</var> and from the first row whose header describes <var>starting point</var> and <var>selection mechanism</var>.</p>

    <table><thead><tr><th>
       <th> <var>direction</var> is <i>forward</i>
       <th> <var>direction</var> is <i>backward</i>
     <tbody><tr><th><var>starting point</var> is a <a id=sequential-focus-navigation:browsing-context-2 href=browsers.html#browsing-context>browsing context</a>
       <td>Let <var>candidate</var> be the first <a href=#suitable-sequentially-focusable-area id=sequential-focus-navigation:suitable-sequentially-focusable-area>suitable sequentially focusable area</a> in <var>starting point</var>'s <a id=sequential-focus-navigation:active-document href=browsers.html#active-document>active document</a>'s <a href=#primary-control-group id=sequential-focus-navigation:primary-control-group>primary control group</a>, if any; or else null
       <td>Let <var>candidate</var> be the last <a href=#suitable-sequentially-focusable-area id=sequential-focus-navigation:suitable-sequentially-focusable-area-2>suitable sequentially focusable area</a> in <var>starting point</var>'s <a id=sequential-focus-navigation:active-document-2 href=browsers.html#active-document>active document</a>'s <a href=#primary-control-group id=sequential-focus-navigation:primary-control-group-2>primary control group</a>, if any; or else null
      <tr><th><var>selection mechanism</var> is <i>DOM</i>
       <td>Let <var>candidate</var> be the first <a href=#suitable-sequentially-focusable-area id=sequential-focus-navigation:suitable-sequentially-focusable-area-3>suitable sequentially focusable area</a> in the <a href=#home-control-group id=sequential-focus-navigation:home-control-group>home control group</a> following <var>starting point</var>, if any; or else null
       <td>Let <var>candidate</var> be the last <a href=#suitable-sequentially-focusable-area id=sequential-focus-navigation:suitable-sequentially-focusable-area-4>suitable sequentially focusable area</a> in the <a href=#home-control-group id=sequential-focus-navigation:home-control-group-2>home control group</a> preceding <var>starting point</var>, if any; or else null
      <tr><th><var>selection mechanism</var> is <i>sequential</i>
       <td>Let <var>candidate</var> be the first <a href=#suitable-sequentially-focusable-area id=sequential-focus-navigation:suitable-sequentially-focusable-area-5>suitable sequentially focusable area</a> in the <a href=#home-sequential-focus-navigation-order id=sequential-focus-navigation:home-sequential-focus-navigation-order>home sequential focus navigation order</a> following <var>starting point</var>, if any; or else null
       <td>Let <var>candidate</var> be the last <a href=#suitable-sequentially-focusable-area id=sequential-focus-navigation:suitable-sequentially-focusable-area-6>suitable sequentially focusable area</a> in the <a href=#home-sequential-focus-navigation-order id=sequential-focus-navigation:home-sequential-focus-navigation-order-2>home sequential focus navigation order</a> preceding <var>starting point</var>, if any; or else null

    </table>

    <p>A <dfn id=suitable-sequentially-focusable-area>suitable sequentially focusable area</dfn> is a <a href=#focusable-area id=sequential-focus-navigation:focusable-area-6>focusable area</a> whose <a href=#dom-anchor id=sequential-focus-navigation:dom-anchor>DOM
    anchor</a> is not <a href=#inert id=sequential-focus-navigation:inert>inert</a> and that is in its <a href=#control-group id=sequential-focus-navigation:control-group-7>control group</a>'s <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order-5>sequential
    focus navigation order</a>.</p>

    <p>The <dfn id=primary-control-group>primary control group</dfn> of a <a href=#control-group-owner-object id=sequential-focus-navigation:control-group-owner-object>control group owner object</a> <var>X</var> is the <a href=#control-group id=sequential-focus-navigation:control-group-8>control group</a> of <var>X</var> if <var>X</var> has no <a href=#dialog-group id=sequential-focus-navigation:dialog-group>dialog group</a> or if its <a href=#dialog-group id=sequential-focus-navigation:dialog-group-2>dialog group</a> has no
    designated <a href=#focused-dialog-of-the-dialog-group id=sequential-focus-navigation:focused-dialog-of-the-dialog-group>focused dialog of the dialog group</a>, otherwise, it is the <a href=#primary-control-group id=sequential-focus-navigation:primary-control-group-3>primary
    control group</a> of <var>X</var>'s <a href=#dialog-group id=sequential-focus-navigation:dialog-group-3>dialog group</a>'s designated
    <a href=#focused-dialog-of-the-dialog-group id=sequential-focus-navigation:focused-dialog-of-the-dialog-group-2>focused dialog of the dialog group</a>.</p>

    <p>The <dfn id=home-control-group>home control group</dfn> is the <a href=#control-group id=sequential-focus-navigation:control-group-9>control group</a> to which <var>starting point</var> belongs.</p>

    <p>The <dfn id=home-sequential-focus-navigation-order>home sequential focus navigation order</dfn> is the <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order-6>sequential focus
    navigation order</a> to which <var>starting point</var> belongs.</p>

    <p class=note>The <a href=#home-sequential-focus-navigation-order id=sequential-focus-navigation:home-sequential-focus-navigation-order-3>home sequential focus navigation order</a> is the <a href=#home-control-group id=sequential-focus-navigation:home-control-group-3>home
    control group</a>'s <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order-7>sequential focus navigation order</a>, but is only used when the
    <var>starting point</var> is in that <a href=#sequential-focus-navigation-order id=sequential-focus-navigation:sequential-focus-navigation-order-8>sequential focus navigation order</a>
    (when it's not, <var>selection mechanism</var> will be <i>DOM</i>).</p>

   <li>

    <p>If <var>candidate</var> is a <a id=sequential-focus-navigation:browsing-context-container-2 href=browsers.html#browsing-context-container>browsing context container</a> with a non-null
    <a id=sequential-focus-navigation:nested-browsing-context-3 href=browsers.html#nested-browsing-context>nested browsing context</a>, then let <var>new candidate</var> be the result of running
    the <a href=#sequential-navigation-search-algorithm id=sequential-focus-navigation:sequential-navigation-search-algorithm-2>sequential navigation search algorithm</a> with <var>candidate</var>'s <a id=sequential-focus-navigation:nested-browsing-context-4 href=browsers.html#nested-browsing-context>nested
    browsing context</a> as the first argument, <var>direction</var> as the second, and
    <i>sequential</i>  as the third.</p>

    <p>If <var>new candidate</var> is null, then let <var>starting point</var>
    be <var>candidate</var>, and return to the top of this algorithm. Otherwise, let
    <var>candidate</var> be <var>new candidate</var>.</p>

   <li><p>Return <var>candidate</var>.</ol>

  


  <h4 id=focus-management-apis><span class=secno>6.4.6</span> Focus management APIs<a href=#focus-management-apis class=self-link></a></h4>

  <dl class=domintro><dt><var>document</var> . <code id=focus-management-apis:dom-document-activeelement><a href=#dom-document-activeelement>activeElement</a></code><dd>

    <p>Returns the deepest element in the document through which or to which key events are being
    routed. This is, roughly speaking, the focused element in the document.</p>

    <p>For the purposes of this API, when a <a id=focus-management-apis:child-browsing-context href=browsers.html#child-browsing-context>child browsing context</a> is focused, its
    <a id=focus-management-apis:browsing-context-container href=browsers.html#browsing-context-container>browsing context container</a> is <a href=#bc-focus-ergo-bcc-focus>focused</a> in the
    <a id=focus-management-apis:parent-browsing-context href=browsers.html#parent-browsing-context>parent browsing context</a>. For example, if the user moves the focus to a text control
    in an <code id=focus-management-apis:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>, the <code id=focus-management-apis:the-iframe-element-2><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code> is the element returned by the <code id=focus-management-apis:dom-document-activeelement-2><a href=#dom-document-activeelement>activeElement</a></code> API in the <code id=focus-management-apis:the-iframe-element-3><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>'s
    <a id=focus-management-apis:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.</p>

   <dt><var>document</var> . <code id=focus-management-apis:dom-document-hasfocus><a href=#dom-document-hasfocus>hasFocus</a></code>()<dd>

    <p>Returns true if key events are being routed through or to the document; otherwise, returns
    false. Roughly speaking, this corresponds to the document, or a document nested inside this
    one, being focused.</p>

   <dt><var>window</var> . <code id=focus-management-apis:dom-window-focus><a href=#dom-window-focus>focus</a></code>()<dd>

    

    <p>Moves the focus to the window's <a id=focus-management-apis:browsing-context href=browsers.html#browsing-context>browsing context</a>, if any.</p>

   <dt><var>element</var> . <code id=focus-management-apis:dom-focus><a href=#dom-focus>focus</a></code>()<dd>

    <p>Moves the focus to the element.</p>

    <p>If the element is a <a id=focus-management-apis:browsing-context-container-2 href=browsers.html#browsing-context-container>browsing context container</a>, moves the focus to the <a id=focus-management-apis:nested-browsing-context href=browsers.html#nested-browsing-context>nested browsing context</a> instead.</p>

   <dt><var>element</var> . <code id=focus-management-apis:dom-blur><a href=#dom-blur>blur</a></code>()<dd>

    <p>Moves the focus to the <a id=focus-management-apis:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>. Use of this method is discouraged; if you want
    to focus the <a id=focus-management-apis:viewport-2 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>, call the <code id=focus-management-apis:dom-focus-2><a href=#dom-focus>focus()</a></code> method on
    the <code id=focus-management-apis:document><a href=dom.html#document>Document</a></code>'s <a id=focus-management-apis:document-element href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a>.</p>

    <p>Do not use this method to hide the focus ring if you find the focus ring unsightly. Instead,
    use a CSS rule to override the <a id="focus-management-apis:'outline'" href=https://drafts.csswg.org/css-ui/#outline data-x-internal="'outline'">'outline'</a> property, and provide a different way to
    show what element is focused. Be aware that if an alternative focusing style isn't made
    available, the page will be significantly less usable for people who primarily navigate pages
    using a keyboard, or those with reduced vision who use focus outlines to help them navigate the
    page.</p>

    

    <div class=example>

     <p>For example, to hide the outline from links and instead use a yellow background to indicate
     focus, you could use:</p>

     <pre>:link:focus, :visited:focus { outline: none; background: yellow; color: black; }</pre>

    </div>

   </dl>

  

  <p>The <dfn id=dom-document-activeelement><code>activeElement</code></dfn> attribute on
  <code id=focus-management-apis:document-2><a href=dom.html#document>Document</a></code> objects must return the value returned by the following steps:</p>

  <ol><li><p>Let <var>candidate</var> be the <code id=focus-management-apis:document-3><a href=dom.html#document>Document</a></code> on which the method was
   invoked.<li><p>If <var>candidate</var> has a <a href=#dialog-group id=focus-management-apis:dialog-group>dialog group</a> with a designated
   <a href=#focused-dialog-of-the-dialog-group id=focus-management-apis:focused-dialog-of-the-dialog-group>focused dialog of the dialog group</a>, then let <var>candidate</var> be the
   designated <a href=#focused-dialog-of-the-dialog-group id=focus-management-apis:focused-dialog-of-the-dialog-group-2>focused dialog of the dialog group</a>, and redo this step.<li><p>If <var>candidate</var> has a non-empty <a href=#control-group id=focus-management-apis:control-group>control group</a>, let <var>candidate</var> be the designated <a href=#focused-area-of-the-control-group id=focus-management-apis:focused-area-of-the-control-group>focused area of the control
   group</a>.</p>

   <li><p>If <var>candidate</var> is a <a href=#focusable-area id=focus-management-apis:focusable-area>focusable area</a>, let <var>candidate</var> be <var>candidate</var>'s <a href=#dom-anchor id=focus-management-apis:dom-anchor>DOM anchor</a>.<li>

    <p>If <var>candidate</var> is a <code id=focus-management-apis:document-4><a href=dom.html#document>Document</a></code> that has a <a href=dom.html#the-body-element-2 id=focus-management-apis:the-body-element-2>body element</a>, then let <var>candidate</var> be <a id=focus-management-apis:the-body-element-2-2 href=dom.html#the-body-element-2>the body
    element</a> of that <code id=focus-management-apis:document-5><a href=dom.html#document>Document</a></code>.</p>

    <p>Otherwise, if <var>candidate</var> is a <code id=focus-management-apis:document-6><a href=dom.html#document>Document</a></code> with a non-null <a id=focus-management-apis:document-element-2 href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document
    element</a>, then let <var>candidate</var> be that <a id=focus-management-apis:document-element-3 href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a>.</p>

    <p>Otherwise, if <var>candidate</var> is a <code id=focus-management-apis:document-7><a href=dom.html#document>Document</a></code>, then let <var>candidate</var> be null.</p>

   <li><p>Return <var>candidate</var>.</ol>

  <p>The <dfn id=dom-document-hasfocus><code>hasFocus()</code></dfn> method on the
  <code id=focus-management-apis:document-8><a href=dom.html#document>Document</a></code> object, when invoked, must return the result of running the <a href=#has-focus-steps id=focus-management-apis:has-focus-steps>has focus
  steps</a> with the <code id=focus-management-apis:document-9><a href=dom.html#document>Document</a></code> object as the argument.</p>

  <p>The <dfn id=dom-window-focus><code>focus()</code></dfn> method on the <code id=focus-management-apis:window><a href=window-object.html#window>Window</a></code>
  object, when invoked, must run the <a href=#focusing-steps id=focus-management-apis:focusing-steps>focusing steps</a> with the <code id=focus-management-apis:window-2><a href=window-object.html#window>Window</a></code>
  object's <a id=focus-management-apis:browsing-context-2 href=browsers.html#browsing-context>browsing context</a>. Additionally, if this <a id=focus-management-apis:browsing-context-3 href=browsers.html#browsing-context>browsing context</a> is a
  <a id=focus-management-apis:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a>, user agents are encouraged to trigger some sort of
  notification to indicate to the user that the page is attempting to gain focus.</p>

  <p>The <dfn id=dom-window-blur><code>blur()</code></dfn> method on the <code id=focus-management-apis:window-3><a href=window-object.html#window>Window</a></code>
  object, when invoked, provides a hint to the user agent that the script believes the user probably
  is not currently interested in the contents of the <a id=focus-management-apis:browsing-context-4 href=browsers.html#browsing-context>browsing context</a> of the
  <code id=focus-management-apis:window-4><a href=window-object.html#window>Window</a></code> object on which the method was invoked, but that the contents might become
  interesting again in the future.</p>

  <p>User agents are encouraged to ignore calls to this <code id=focus-management-apis:dom-window-blur><a href=#dom-window-blur>blur()</a></code>
  method entirely.</p>

  <p class=note>Historically, the <code id=focus-management-apis:dom-window-blur-2><a href=#dom-window-blur>focus()</a></code> and <code id=focus-management-apis:dom-window-blur-3><a href=#dom-window-blur>blur()</a></code> methods actually affected the system-level focus of the
  system widget (e.g. tab or window) that contained the <a id=focus-management-apis:browsing-context-5 href=browsers.html#browsing-context>browsing context</a>, but hostile
  sites widely abuse this behavior to the user's detriment.</p>

  <p>The <dfn id=dom-focus><code>focus()</code></dfn> method on elements, when invoked, must
  run the following algorithm:</p>

  <ol><li><p>If the element is marked as <i id=focus-management-apis:locked-for-focus><a href=#locked-for-focus>locked for focus</a></i>, then abort these steps.<li><p>Mark the element as <dfn id=locked-for-focus>locked for focus</dfn>.<li><p>Run the <a href=#focusing-steps id=focus-management-apis:focusing-steps-2>focusing steps</a> for the element.<li><p>Unmark the element as <i id=focus-management-apis:locked-for-focus-2><a href=#locked-for-focus>locked for focus</a></i>.</ol>

  <p>The <dfn id=dom-blur><code>blur()</code></dfn> method, when invoked, should run the
  <a href=#unfocusing-steps id=focus-management-apis:unfocusing-steps>unfocusing steps</a> for the element on which the method was called. User agents may
  selectively or uniformly ignore calls to this method for usability reasons.</p>

  <p class=example>For example, if the <code id=focus-management-apis:dom-blur-2><a href=#dom-blur>blur()</a></code> method is unwisely
  being used to remove the focus ring for aesthetics reasons, the page would become unusable by
  keyboard users. Ignoring calls to this method would thus allow keyboard users to interact with the
  page.</p>

  




  <h3 id=assigning-keyboard-shortcuts><span class=secno>6.5</span> Assigning keyboard shortcuts<a href=#assigning-keyboard-shortcuts class=self-link></a></h3>

  <h4 id=introduction-9><span class=secno>6.5.1</span> Introduction<a href=#introduction-9 class=self-link></a></h4>

  <p><i>This section is non-normative.</i></p>

  <p>Each element that can be activated or focused can be assigned a single key combination to
  activate it, using the <code id=introduction-9:the-accesskey-attribute><a href=#the-accesskey-attribute>accesskey</a></code> attribute.</p>

  <p>The exact shortcut is determined by the user agent, based on information about the user's
  keyboard, what keyboard shortcuts already exist on the platform, and what other shortcuts have
  been specified on the page, using the information provided in the <code id=introduction-9:the-accesskey-attribute-2><a href=#the-accesskey-attribute>accesskey</a></code> attribute as a guide.</p>

  <p>In order to ensure that a relevant keyboard shortcut is available on a wide variety of input
  devices, the author can provide a number of alternatives in the <code id=introduction-9:the-accesskey-attribute-3><a href=#the-accesskey-attribute>accesskey</a></code> attribute.</p>

  <p>Each alternative consists of a single character, such as a letter or digit.</p>

  <p>User agents can provide users with a list of the keyboard shortcuts, but authors are encouraged
  to do so also. The <code id=introduction-9:dom-accesskeylabel><a href=#dom-accesskeylabel>accessKeyLabel</a></code> IDL attribute returns a
  string representing the actual key combination assigned by the user agent.</p>

  <div class=example>

   <p>In this example, an author has provided a button that can be invoked using a shortcut key. To
   support full keyboards, the author has provided "C" as a possible key. To support devices
   equipped only with numeric keypads, the author has provided "1" as another possibly key.</p>

   <pre>&lt;input type=button value=Collect onclick="collect()"
       <strong>accesskey="C 1"</strong> id=c></pre>

  </div>

  <div class=example>

   <p>To tell the user what the shortcut key is, the author has this script here opted to explicitly
   add the key combination to the button's label:</p>

   <pre>function addShortcutKeyLabel(button) {
<strong>  if (button.accessKeyLabel != '')
    button.value += ' (' + button.accessKeyLabel + ')';</strong>
}
addShortcutKeyLabel(document.getElementById('c'));</pre>

   <p>Browsers on different platforms will show different labels, even for the same key combination,
   based on the convention prevalent on that platform. For example, if the key combination is the
   Control key, the Shift key, and the letter C, a Windows browser might display
   "<samp>Ctrl+Shift+C</samp>", whereas a Mac browser might display "<samp>^⇧C</samp>", while
   an Emacs browser might just display "<samp>C-C</samp>". Similarly, if the key combination is the
   Alt key and the Escape key, Windows might use "<samp>Alt+Esc</samp>", Mac might use
   "<samp>⌥⎋</samp>", and an Emacs browser might use "<samp>M-ESC</samp>" or
   "<samp>ESC ESC</samp>".</p>

   <p>In general, therefore, it is unwise to attempt to parse the value returned from the <code id=introduction-9:dom-accesskeylabel-2><a href=#dom-accesskeylabel>accessKeyLabel</a></code> IDL attribute.</p>

  </div>


  <h4 id=the-accesskey-attribute><span class=secno>6.5.2</span> The <dfn><code>accesskey</code></dfn> attribute<a href=#the-accesskey-attribute class=self-link></a></h4>

  <p>All <a id=the-accesskey-attribute:html-elements href=infrastructure.html#html-elements>HTML elements</a> may have the <code id=the-accesskey-attribute:the-accesskey-attribute><a href=#the-accesskey-attribute>accesskey</a></code>
  content attribute set. The <code id=the-accesskey-attribute:the-accesskey-attribute-2><a href=#the-accesskey-attribute>accesskey</a></code> attribute's value is used
  by the user agent as a guide for creating a keyboard shortcut that activates or focuses the
  element.</p>

  <p>If specified, the value must be an <a id=the-accesskey-attribute:ordered-set-of-unique-space-separated-tokens href=common-microsyntaxes.html#ordered-set-of-unique-space-separated-tokens>ordered set of unique space-separated tokens</a>
  that are <a id=the-accesskey-attribute:case-sensitive href=infrastructure.html#case-sensitive>case-sensitive</a>, each of which must be exactly one code point in length.</p>

  <div class=example>

   <p>In the following example, a variety of links are given with access keys so that keyboard users
   familiar with the site can more quickly navigate to the relevant pages:</p>

   <pre>&lt;nav>
 &lt;p>
  &lt;a title="Consortium Activities" accesskey="A" href="/Consortium/activities">Activities&lt;/a> |
  &lt;a title="Technical Reports and Recommendations" accesskey="T" href="/TR/">Technical Reports&lt;/a> |
  &lt;a title="Alphabetical Site Index" accesskey="S" href="/Consortium/siteindex">Site Index&lt;/a> |
  &lt;a title="About This Site" accesskey="B" href="/Consortium/">About Consortium&lt;/a> |
  &lt;a title="Contact Consortium" accesskey="C" href="/Consortium/contact">Contact&lt;/a>
 &lt;/p>
&lt;/nav></pre>

  </div>

  <div class=example>

   <p>In the following example, the search field is given two possible access keys, "s" and "0" (in
   that order). A user agent on a device with a full keyboard might pick <kbd><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>S</kbd></kbd> as the shortcut key,
   while a user agent on a small device with just a numeric keypad might pick just the plain
   unadorned key <kbd><kbd>0</kbd></kbd>:</p>

   <pre>&lt;form action="/search">
 &lt;label>Search: &lt;input type="search" name="q" accesskey="s 0">&lt;/label>
 &lt;input type="submit">
&lt;/form></pre>

  </div>

  <div class=example>

   <p>In the following example, a button has possible access keys described. A script then tries to
   update the button's label to advertise the key combination the user agent selected.</p>

   <pre>&lt;input type=submit accesskey="N @ 1" value="Compose">
...
&lt;script>
 function labelButton(button) {
   if (button.accessKeyLabel)
     button.value += ' (' + button.accessKeyLabel + ')';
 }
 var inputs = document.getElementsByTagName('input');
 for (var i = 0; i &lt; inputs.length; i += 1) {
   if (inputs[i].type == "submit")
     labelButton(inputs[i]);
 }
&lt;/script></pre>

   <p>On one user agent, the button's label might become "<samp>Compose (⌘N)</samp>". On
   another, it might become "<samp>Compose (Alt+⇧+1)</samp>". If the user agent doesn't
   assign a key, it will be just "<samp>Compose</samp>". The exact string depends on what the
   <a href=#assigned-access-key id=the-accesskey-attribute:assigned-access-key>assigned access key</a> is, and on how the user agent represents that key
   combination.</p>

  </div>


  

  <h4 id=keyboard-shortcuts-processing-model><span class=secno>6.5.3</span> <span id=processing-model-6></span>Processing
  model<a href=#keyboard-shortcuts-processing-model class=self-link></a></h4>

  <p>An element's <dfn id=assigned-access-key>assigned access key</dfn> is a key combination derived from the element's
  <code id=keyboard-shortcuts-processing-model:the-accesskey-attribute><a href=#the-accesskey-attribute>accesskey</a></code> content attribute. Initially, an element must not
  have an <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key>assigned access key</a>.</p>

  <p>Whenever an element's <code id=keyboard-shortcuts-processing-model:the-accesskey-attribute-2><a href=#the-accesskey-attribute>accesskey</a></code> attribute is set, changed,
  or removed, the user agent must update the element's <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key-2>assigned access key</a> by running
  the following steps:</p>

  <ol><li><p>If the element has no <code id=keyboard-shortcuts-processing-model:the-accesskey-attribute-3><a href=#the-accesskey-attribute>accesskey</a></code> attribute, then skip
   to the <i>fallback</i> step below.<li><p>Otherwise, <a href=https://infra.spec.whatwg.org/#split-on-ascii-whitespace id=keyboard-shortcuts-processing-model:split-a-string-on-spaces data-x-internal=split-a-string-on-spaces>split the attribute's value
   on ASCII whitespace</a>, and let <var>keys</var> be the resulting tokens.<li>

    <p>For each value in <var>keys</var> in turn, in the order the tokens appeared in the
    attribute's value, run the following substeps:</p>

    <ol><li><p>If the value is not a string exactly one code point in length, then skip the remainder
     of these steps for this value.<li><p>If the value does not correspond to a key on the system's keyboard, then skip the
     remainder of these steps for this value.<li><p>If the user agent can find a mix of zero or more modifier keys that, combined with the
     key that corresponds to the value given in the attribute, can be used as the access key, then
     the user agent may assign that combination of keys as the element's <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key-3>assigned access
     key</a> and abort these steps.
     <a id=keyboard-shortcuts-processing-model:fingerprinting-vector title="There is a potential fingerprinting vector here." href=introduction.html#fingerprinting-vector class=fingerprint><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
     </ol>

   <li><p><i>Fallback</i>: Optionally, the user agent may assign a key combination of its choosing
   as the element's <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key-4>assigned access key</a> and then abort these steps.<li><p>If this step is reached, the element has no <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key-5>assigned access key</a>.</ol>

  <p>Once a user agent has selected and assigned an access key for an element, the user agent should
  not change the element's <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key-6>assigned access key</a> unless the <code id=keyboard-shortcuts-processing-model:the-accesskey-attribute-4><a href=#the-accesskey-attribute>accesskey</a></code> content attribute is changed or the element is moved to
  another <code id=keyboard-shortcuts-processing-model:document><a href=dom.html#document>Document</a></code>.</p>

  <p>When the user presses the key combination corresponding to the <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key-7>assigned access key</a>
  for an element, if the element <a href=interactive-elements.html#concept-command id=keyboard-shortcuts-processing-model:concept-command>defines a command</a>, the
  command's <a href=interactive-elements.html#command-facet-hiddenstate id=keyboard-shortcuts-processing-model:command-facet-hiddenstate>Hidden State</a> facet is false (visible),
  the command's <a href=interactive-elements.html#command-facet-disabledstate id=keyboard-shortcuts-processing-model:command-facet-disabledstate>Disabled State</a> facet is also false
  (enabled), the element is <a id=keyboard-shortcuts-processing-model:in-a-document href=https://dom.spec.whatwg.org/#in-a-document data-x-internal=in-a-document>in a document</a> that has a <a href=browsers.html#concept-document-bc id=keyboard-shortcuts-processing-model:concept-document-bc>browsing context</a>, and neither the element nor any of its
  ancestors has a <code id=keyboard-shortcuts-processing-model:the-hidden-attribute><a href=#the-hidden-attribute>hidden</a></code> attribute specified, then the user agent
  must trigger the <a href=interactive-elements.html#command-facet-action id=keyboard-shortcuts-processing-model:command-facet-action>Action</a> of the command.</p>

  <p class=note>User agents <a href=interactive-elements.html#expose-commands-in-ui>might expose</a> elements that have
  an <code id=keyboard-shortcuts-processing-model:the-accesskey-attribute-5><a href=#the-accesskey-attribute>accesskey</a></code> attribute in other ways as well, e.g. in a menu
  displayed in response to a specific key combination.</p> 

  <hr>

  <p>The <dfn id=dom-accesskey><code>accessKey</code></dfn> IDL attribute must
  <a id=keyboard-shortcuts-processing-model:reflect href=common-dom-interfaces.html#reflect>reflect</a> the <code id=keyboard-shortcuts-processing-model:the-accesskey-attribute-6><a href=#the-accesskey-attribute>accesskey</a></code> content attribute.</p>

  <p>The <dfn id=dom-accesskeylabel><code>accessKeyLabel</code></dfn> IDL attribute must return
  a string that represents the element's <a href=#assigned-access-key id=keyboard-shortcuts-processing-model:assigned-access-key-8>assigned access key</a>, if any. If the element
  does not have one, then the IDL attribute must return the empty string.</p>

  



  <h3 id=editing-2><span class=secno>6.6</span> Editing<a href=#editing-2 class=self-link></a></h3>

  <h4 id=contenteditable><span class=secno>6.6.1</span> Making document regions editable: The <code id=contenteditable:attr-contenteditable><a href=#attr-contenteditable>contenteditable</a></code> content attribute<a href=#contenteditable class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> contenteditable<span class="and_chr yes"><span>Chrome for Android</span> <span>61+</span></span><span class="chrome yes"><span>Chrome</span> <span>4+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>5.0+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.4+</span></span><span class="firefox yes"><span>Firefox</span> <span>3.5+</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="ie yes"><span>IE</span> <span>5.5+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="safari yes"><span>Safari</span> <span>3.1+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android yes"><span>Android Browser</span> <span>3+</span></span><span class="opera yes"><span>Opera</span> <span>9+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=contenteditable">caniuse.com</a></div>

  <pre class=idl>[Exposed=Window,
 NoInterfaceObject]
interface <dfn id=elementcontenteditable>ElementContentEditable</dfn> {
  [<a id=contenteditable:cereactions href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-contenteditable id=contenteditable:dom-contenteditable>contentEditable</a>;
  readonly attribute boolean <a href=#dom-iscontenteditable id=contenteditable:dom-iscontenteditable>isContentEditable</a>;
};</pre>

  <p>The <dfn id=attr-contenteditable><code>contenteditable</code></dfn> content attribute is an
  <a id=contenteditable:enumerated-attribute href=common-microsyntaxes.html#enumerated-attribute>enumerated attribute</a> whose keywords are the empty string, <code>true</code>,
  and <code>false</code>. The empty string and the <code>true</code> keyword map
  to the <i>true</i> state. The <code>false</code> keyword maps to the <i>false</i> state.
  In addition, there is a third state, the <i>inherit</i> state, which is the <i id=contenteditable:missing-value-default><a href=common-microsyntaxes.html#missing-value-default>missing value default</a></i> (and the <i id=contenteditable:invalid-value-default><a href=common-microsyntaxes.html#invalid-value-default>invalid value default</a></i>).</p>

  <p>The <i>true</i> state indicates that the element is editable. The <i>inherit</i> state
  indicates that the element is editable if its parent is. The <i>false</i> state indicates that the
  element is not editable.</p>

  <div class=example>
   <p>For example, consider a page that has a <code id=contenteditable:the-form-element><a href=forms.html#the-form-element>form</a></code> and a <code id=contenteditable:the-textarea-element><a href=form-elements.html#the-textarea-element>textarea</a></code> to
   publish a new article, where the user is expected to write the article using HTML:</p>

   <pre>&lt;form method=POST>
 &lt;fieldset>
  &lt;legend>New article&lt;/legend>
  &lt;textarea name=article>&amp;lt;p>Hello world.&amp;lt;/p>&lt;/textarea>
 &lt;/fieldset>
 &lt;p>&lt;button>Publish&lt;/button>&lt;/p>
&lt;/form></pre>

   <p>When scripting is enabled, the <code id=contenteditable:the-textarea-element-2><a href=form-elements.html#the-textarea-element>textarea</a></code> element could be replaced with a rich
   text control instead, using the <code id=contenteditable:attr-contenteditable-2><a href=#attr-contenteditable>contenteditable</a></code>
   attribute:</p>

   <pre>&lt;form method=POST>
 &lt;fieldset>
  &lt;legend>New article&lt;/legend>
  &lt;textarea id=textarea name=article>&amp;lt;p>Hello world.&amp;lt;/p>&lt;/textarea>
  &lt;div id=div style="white-space: pre-wrap" hidden>&lt;p>Hello world.&lt;/p>&lt;/div>
  &lt;script>
   let textarea = document.getElementById("textarea");
   let div = document.getElementById("div");
   textarea.hidden = true;
   div.hidden = false;
   div.contentEditable = "true";
   div.oninput = (e) => {
     textarea.value = div.innerHTML;
   };
  &lt;/script>
 &lt;/fieldset>
 &lt;p>&lt;button>Publish&lt;/button>&lt;/p>
&lt;/form></pre>

   <p>Features to enable, e.g., inserting links, can be implemented using the <code id=contenteditable:execCommand><a data-x-internal=execCommand href=https://w3c.github.io/editing/execCommand.html#execcommand%28%29>document.execCommand()</a></code> API, or using
   <code id=contenteditable:selection><a data-x-internal=selection href=https://w3c.github.io/selection-api/#selection-interface>Selection</a></code> APIs and other DOM APIs. <a href=references.html#refsEXECCOMMAND>[EXECCOMMAND]</a> <a href=references.html#refsSELECTION>[SELECTION]</a> <a href=references.html#refsDOM>[DOM]</a></p>
  </div>

  <div class=example>
   <p>The <code id=contenteditable:attr-contenteditable-3><a href=#attr-contenteditable>contenteditable</a></code> attribute can also be used to
   great effect:</p>

   <pre>&lt;!doctype html>
&lt;html lang=en>
&lt;title>Live CSS editing!&lt;/title>
&lt;style style=white-space:pre contenteditable>
html { margin:.2em; font-size:2em; color:lime; background:purple }
head, title, style { display:block }
body { display:none }
&lt;/style></pre>
  </div>

  <dl class=domintro><dt><var>element</var> . <code id=contenteditable:dom-contenteditable-2><a href=#dom-contenteditable>contentEditable</a></code> [ = <var>value</var> ]<dd>

    <p>Returns "<code>true</code>", "<code>false</code>", or "<code>inherit</code>", based on the state of the <code id=contenteditable:attr-contenteditable-4><a href=#attr-contenteditable>contenteditable</a></code> attribute.</p>

    <p>Can be set, to change that state.</p>

    <p>Throws a <a id=contenteditable:syntaxerror href=https://heycam.github.io/webidl/#syntaxerror data-x-internal=syntaxerror>"<code>SyntaxError</code>"</a> <code id=contenteditable:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the new value
    isn't one of those strings.</p>

   <dt><var>element</var> . <code id=contenteditable:dom-iscontenteditable-2><a href=#dom-iscontenteditable>isContentEditable</a></code><dd>

    <p>Returns true if the element is editable; otherwise, returns false.</p>

   </dl>

  

  <p>The <dfn id=dom-contenteditable><code>contentEditable</code></dfn> IDL attribute, on
  getting, must return the string "<code>true</code>" if the content attribute is set to
  the true state, "<code>false</code>" if the content attribute is set to the false state,
  and "<code>inherit</code>" otherwise. On setting, if the new value is an <a id=contenteditable:ascii-case-insensitive href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII
  case-insensitive</a> match for the string "<code>inherit</code>" then the content
  attribute must be removed, if the new value is an <a id=contenteditable:ascii-case-insensitive-2 href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for
  the string "<code>true</code>" then the content attribute must be set to the string
  "<code>true</code>", if the new value is an <a id=contenteditable:ascii-case-insensitive-3 href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for
  the string "<code>false</code>" then the content attribute must be set to the string
  "<code>false</code>", and otherwise the attribute setter must throw a
  <a id=contenteditable:syntaxerror-2 href=https://heycam.github.io/webidl/#syntaxerror data-x-internal=syntaxerror>"<code>SyntaxError</code>"</a> <code id=contenteditable:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.</p>

  <p>The <dfn id=dom-iscontenteditable><code>isContentEditable</code></dfn> IDL attribute, on
  getting, must return true if the element is either an <a id=contenteditable:editing-host href=https://w3c.github.io/editing/execCommand.html#editing-host data-x-internal=editing-host>editing host</a> or
  <a id=contenteditable:editable href=https://w3c.github.io/editing/execCommand.html#editable data-x-internal=editable>editable</a>, and false otherwise.</p>

  



  <h4 id=making-entire-documents-editable:-the-designmode-idl-attribute><span class=secno>6.6.2</span> Making entire documents editable: the <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode><a href=#designMode>designMode</a></code>
  IDL attribute<a href=#making-entire-documents-editable:-the-designmode-idl-attribute class=self-link></a></h4>

  

  <p>Documents have a <dfn id=designMode><code>designMode</code></dfn>, which can be either enabled or
  disabled.</p>

  

  <dl class=domintro><dt><var>document</var> . <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode-2><a href=#designMode>designMode</a></code> [ = <var>value</var> ]<dd>

    <p>Returns "<code>on</code>" if the document is editable, and "<code>off</code>" if it isn't.</p>

    <p>Can be set, to change the document's current state. This focuses the document and resets the
    selection in that document.</p>

   </dl>

  

  <p>The <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode-3><a href=#designMode>designMode</a></code> IDL attribute on the
  <code id=making-entire-documents-editable:-the-designmode-idl-attribute:document><a href=dom.html#document>Document</a></code> object takes two values, "<code>on</code>" and "<code>off</code>". On setting, the new value must be compared in an <a id=making-entire-documents-editable:-the-designmode-idl-attribute:ascii-case-insensitive href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII
  case-insensitive</a> manner to these two values; if it matches the "<code>on</code>"
  value, then <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode-4><a href=#designMode>designMode</a></code> must be enabled, and if it
  matches the "<code>off</code>" value, then <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode-5><a href=#designMode>designMode</a></code> must be disabled. Other values must be
  ignored.</p>

  <p>On getting, if <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode-6><a href=#designMode>designMode</a></code> is enabled, the IDL
  attribute must return the value "<code>on</code>"; otherwise it is disabled, and the
  attribute must return the value "<code>off</code>".</p>

  <p>The last state set must persist until the document is destroyed or the state is changed.
  Initially, documents must have their <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode-7><a href=#designMode>designMode</a></code>
  disabled.</p>

  <p>When the <code id=making-entire-documents-editable:-the-designmode-idl-attribute:designMode-8><a href=#designMode>designMode</a></code> changes from being disabled to
  being enabled, the user agent must <a id=making-entire-documents-editable:-the-designmode-idl-attribute:immediately href=infrastructure.html#immediately>immediately</a> reset the document's <a id=making-entire-documents-editable:-the-designmode-idl-attribute:active-range href=https://w3c.github.io/editing/execCommand.html#active-range data-x-internal=active-range>active range</a>'s
  start and end boundary points to be at the start of the <code id=making-entire-documents-editable:-the-designmode-idl-attribute:document-2><a href=dom.html#document>Document</a></code> and then run the
  <a href=#focusing-steps id=making-entire-documents-editable:-the-designmode-idl-attribute:focusing-steps>focusing steps</a> for the <a id=making-entire-documents-editable:-the-designmode-idl-attribute:document-element href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a> of the <code id=making-entire-documents-editable:-the-designmode-idl-attribute:document-3><a href=dom.html#document>Document</a></code>, if
  non-null.</p>

  


  <h4 id=best-practices-for-in-page-editors><span class=secno>6.6.3</span> Best practices for in-page editors<a href=#best-practices-for-in-page-editors class=self-link></a></h4>

  <p>Authors are encouraged to set the <a id="best-practices-for-in-page-editors:'white-space'" href=https://drafts.csswg.org/css-text/#white-space-property data-x-internal="'white-space'">'white-space'</a> property on <a href=https://w3c.github.io/editing/execCommand.html#editing-host id=best-practices-for-in-page-editors:editing-host data-x-internal=editing-host>editing hosts</a> and on markup that was originally created through these editing
  mechanisms to the value 'pre-wrap'. Default HTML whitespace handling is not well suited to WYSIWYG
  editing, and line wrapping will not work correctly in some corner cases if
  <a id="best-practices-for-in-page-editors:'white-space'-2" href=https://drafts.csswg.org/css-text/#white-space-property data-x-internal="'white-space'">'white-space'</a> is left at its default value.</p>

  <div class=example>

   <p>As an example of problems that occur if the default 'normal' value is used instead, consider
   the case of the user typing "<kbd>yellow␣␣ball</kbd>", with two spaces (here
   represented by "␣") between the words. With the editing rules in place for the default
   value of <a id="best-practices-for-in-page-editors:'white-space'-3" href=https://drafts.csswg.org/css-text/#white-space-property data-x-internal="'white-space'">'white-space'</a> ('normal'), the resulting markup will either consist of
   "<samp>yellow&amp;nbsp; ball</samp>" or "<samp>yellow &amp;nbsp;ball</samp>"; i.e.,
   there will be a non-breaking space between the two words in addition to the regular space. This
   is necessary because the 'normal' value for <a id="best-practices-for-in-page-editors:'white-space'-4" href=https://drafts.csswg.org/css-text/#white-space-property data-x-internal="'white-space'">'white-space'</a> requires adjacent regular
   spaces to be collapsed together.</p>

   <p>In the former case, "<samp>yellow⍽</samp>" might wrap to the next line ("⍽"
   being used here to represent a non-breaking space) even though "<samp>yellow</samp>" alone might
   fit at the end of the line; in the latter case, "<samp>⍽ball</samp>", if wrapped to the
   start of the line, would have visible indentation from the non-breaking space.</p>

   <p>When <a id="best-practices-for-in-page-editors:'white-space'-5" href=https://drafts.csswg.org/css-text/#white-space-property data-x-internal="'white-space'">'white-space'</a> is set to 'pre-wrap', however, the editing rules will instead
   simply put two regular spaces between the words, and should the two words be split at the end of
   a line, the spaces would be neatly removed from the rendering.</p>

  </div>

  

  <h4 id=editing-apis><span class=secno>6.6.4</span> Editing APIs<a href=#editing-apis class=self-link></a></h4>

  <p>The definition of the terms
  <dfn id=active-range><a href=https://w3c.github.io/editing/execCommand.html#active-range>active range</a></dfn>,
  <dfn id=editing-host><a href=https://w3c.github.io/editing/execCommand.html#editing-host>editing host</a></dfn>,
  and <dfn id=editable><a href=https://w3c.github.io/editing/execCommand.html#editable>editable</a></dfn>, the
  user interface requirements of elements that are <a href=https://w3c.github.io/editing/execCommand.html#editing-host id=editing-apis:editing-host data-x-internal=editing-host>editing hosts</a>
  or <a id=editing-apis:editable href=https://w3c.github.io/editing/execCommand.html#editable data-x-internal=editable>editable</a>, the

  <dfn id=execCommand><a href=https://w3c.github.io/editing/execCommand.html#execcommand%28%29><code>execCommand()</code></a></dfn>,
  <dfn id=dom-document-querycommandenabled><a href=https://w3c.github.io/editing/execCommand.html#querycommandenabled%28%29><code>queryCommandEnabled()</code></a></dfn>,
  <dfn id=dom-document-querycommandindeterm><a href=https://w3c.github.io/editing/execCommand.html#querycommandindeterm%28%29><code>queryCommandIndeterm()</code></a></dfn>,
  <dfn id=dom-document-querycommandstate><a href=https://w3c.github.io/editing/execCommand.html#querycommandstate%28%29><code>queryCommandState()</code></a></dfn>,
  <dfn id=dom-document-querycommandsupported><a href=https://w3c.github.io/editing/execCommand.html#querycommandsupported%28%29><code>queryCommandSupported()</code></a></dfn>, and
  <dfn id=dom-document-querycommandvalue><a href=https://w3c.github.io/editing/execCommand.html#querycommandvalue%28%29><code>queryCommandValue()</code></a></dfn>

  methods, text selections, and the <dfn id=delete-the-selection><a href=https://w3c.github.io/editing/execCommand.html#delete-the-selection>delete the
  selection</a></dfn> algorithm are defined in <cite>execCommand</cite>. <a href=references.html#refsEXECCOMMAND>[EXECCOMMAND]</a></p>

  

  <h4 id=spelling-and-grammar-checking><span class=secno>6.6.5</span> Spelling and grammar checking<a href=#spelling-and-grammar-checking class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> spellcheck-attribute<span class="and_chr partial"><span>Chrome for Android (limited)</span> <span>61+</span></span><span class="chrome yes"><span>Chrome</span> <span>9+</span></span><span class="ios_saf partial"><span>iOS Safari (limited)</span> <span>3.2+</span></span><span class="and_uc partial"><span>UC Browser for Android (limited)</span> <span>11.4+</span></span><span class="firefox yes"><span>Firefox</span> <span>2+</span></span><span class="samsung partial"><span>Samsung Internet (limited)</span> <span>4+</span></span><span class="ie yes"><span>IE</span> <span>10+</span></span><span class="op_mini partial"><span>Opera Mini (limited)</span> <span>all+</span></span><span class="safari yes"><span>Safari</span> <span>5.1+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android partial"><span>Android Browser (limited)</span> <span>2.1+</span></span><span class="opera yes"><span>Opera</span> <span>10.5+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=spellcheck-attribute">caniuse.com</a></div>

  

  <p>User agents can support the checking of spelling and grammar of editable text, either in form
  controls (such as the value of <code id=spelling-and-grammar-checking:the-textarea-element><a href=form-elements.html#the-textarea-element>textarea</a></code> elements), or in elements in an <a id=spelling-and-grammar-checking:editing-host href=https://w3c.github.io/editing/execCommand.html#editing-host data-x-internal=editing-host>editing
  host</a> (e.g. using <code id=spelling-and-grammar-checking:attr-contenteditable><a href=#attr-contenteditable>contenteditable</a></code>).</p>

  <p>For each element, user agents must establish a <dfn id=concept-spellcheck-default>default
  behavior</dfn>, either through defaults or through preferences expressed by the user. There are
  three possible default behaviors for each element:</p>

  <dl><dt><dfn id=concept-spellcheck-default-true>true-by-default</dfn>

   <dd>The element will be checked for spelling and grammar if its contents are editable and
   spellchecking is not explicitly disabled through the <code id=spelling-and-grammar-checking:attr-spellcheck><a href=#attr-spellcheck>spellcheck</a></code> attribute.

   <dt><dfn id=concept-spellcheck-default-false>false-by-default</dfn>

   <dd>The element will never be checked for spelling and grammar unless spellchecking is
   explicitly enabled through the <code id=spelling-and-grammar-checking:attr-spellcheck-2><a href=#attr-spellcheck>spellcheck</a></code> attribute.

   <dt><dfn id=concept-spellcheck-default-inherit>inherit-by-default</dfn>

   <dd>The element's default behavior is the same as its parent element's. Elements that have no
   parent element cannot have this as their default behavior.

  </dl>

  <hr>

  

  <p>The <dfn id=attr-spellcheck><code>spellcheck</code></dfn> attribute is an <a id=spelling-and-grammar-checking:enumerated-attribute href=common-microsyntaxes.html#enumerated-attribute>enumerated
  attribute</a> whose keywords are the empty string, <code>true</code> and <code>false</code>. The empty string and the <code>true</code> keyword map to the
  <i>true</i> state. The <code>false</code> keyword maps to the <i>false</i> state. In
  addition, there is a third state, the <i>default</i> state, which is the <i id=spelling-and-grammar-checking:missing-value-default><a href=common-microsyntaxes.html#missing-value-default>missing value default</a></i> (and the <i id=spelling-and-grammar-checking:invalid-value-default><a href=common-microsyntaxes.html#invalid-value-default>invalid value default</a></i>).</p>

  <p class=note>The <i>true</i> state indicates that the element is to have its spelling and
  grammar checked. The <i>default</i> state indicates that the element is to act according to a
  default behavior, possibly based on the parent element's own <code id=spelling-and-grammar-checking:attr-spellcheck-3><a href=#attr-spellcheck>spellcheck</a></code> state, as defined below. The <i>false</i> state
  indicates that the element is not to be checked.</p>

  

  <hr>

  

  <dl class=domintro><dt><var>element</var> . <code id=spelling-and-grammar-checking:dom-spellcheck><a href=#dom-spellcheck>spellcheck</a></code> [ = <var>value</var> ]<dd>

    <p>Returns true if the element is to have its spelling and grammar checked; otherwise, returns
    false.</p>

    <p>Can be set, to override the default and set the <code id=spelling-and-grammar-checking:attr-spellcheck-4><a href=#attr-spellcheck>spellcheck</a></code> content attribute.</p>

   </dl>

  

  <p>The <dfn id=dom-spellcheck><code>spellcheck</code></dfn> IDL attribute, on getting, must
  return true if the element's <code id=spelling-and-grammar-checking:attr-spellcheck-5><a href=#attr-spellcheck>spellcheck</a></code> content attribute is
  in the <i>true</i> state, or if the element's <code id=spelling-and-grammar-checking:attr-spellcheck-6><a href=#attr-spellcheck>spellcheck</a></code>
  content attribute is in the <i>default</i> state and the element's <a href=#concept-spellcheck-default id=spelling-and-grammar-checking:concept-spellcheck-default>default behavior</a> is <a href=#concept-spellcheck-default-true id=spelling-and-grammar-checking:concept-spellcheck-default-true>true-by-default</a>, or if the element's <code id=spelling-and-grammar-checking:attr-spellcheck-7><a href=#attr-spellcheck>spellcheck</a></code> content attribute is in the <i>default</i> state and the
  element's <a href=#concept-spellcheck-default id=spelling-and-grammar-checking:concept-spellcheck-default-2>default behavior</a> is <a href=#concept-spellcheck-default-inherit id=spelling-and-grammar-checking:concept-spellcheck-default-inherit>inherit-by-default</a> and the element's parent
  element's <code id=spelling-and-grammar-checking:dom-spellcheck-2><a href=#dom-spellcheck>spellcheck</a></code> IDL attribute would return true;
  otherwise, if none of those conditions applies, then the attribute must instead return false.</p>

  <p class=note>The <code id=spelling-and-grammar-checking:dom-spellcheck-3><a href=#dom-spellcheck>spellcheck</a></code> IDL attribute is not affected
  by user preferences that override the <code id=spelling-and-grammar-checking:attr-spellcheck-8><a href=#attr-spellcheck>spellcheck</a></code> content
  attribute, and therefore might not reflect the actual spellchecking state.</p>

  <p>On setting, if the new value is true, then the element's <code id=spelling-and-grammar-checking:attr-spellcheck-9><a href=#attr-spellcheck>spellcheck</a></code> content attribute must be set to the literal string
  "<code>true</code>", otherwise it must be set to the literal string "<code>false</code>".

  <hr>

  <p>User agents must only consider the following pieces of text as checkable for the purposes of
  this feature:</p>

  <ul><li>The <a href=form-control-infrastructure.html#concept-fe-value id=spelling-and-grammar-checking:concept-fe-value>value</a> of <code id=spelling-and-grammar-checking:the-input-element><a href=input.html#the-input-element>input</a></code> elements whose <code id=spelling-and-grammar-checking:attr-input-type><a href=input.html#attr-input-type>type</a></code> attributes are in the <a href="input.html#text-(type=text)-state-and-search-state-(type=search)" id="spelling-and-grammar-checking:text-(type=text)-state-and-search-state-(type=search)">Text</a>, <a href="input.html#text-(type=text)-state-and-search-state-(type=search)" id="spelling-and-grammar-checking:text-(type=text)-state-and-search-state-(type=search)-2">Search</a>,
   <a href="input.html#url-state-(type=url)" id="spelling-and-grammar-checking:url-state-(type=url)">URL</a>, or <a href="input.html#e-mail-state-(type=email)" id="spelling-and-grammar-checking:e-mail-state-(type=email)">E-mail</a> states and that are <i id=spelling-and-grammar-checking:concept-fe-mutable><a href=form-control-infrastructure.html#concept-fe-mutable>mutable</a></i> (i.e. that do not have the <code id=spelling-and-grammar-checking:attr-input-readonly><a href=input.html#attr-input-readonly>readonly</a></code> attribute specified and that are not <a href=form-control-infrastructure.html#concept-fe-disabled id=spelling-and-grammar-checking:concept-fe-disabled>disabled</a>).<li>The <a href=form-control-infrastructure.html#concept-fe-value id=spelling-and-grammar-checking:concept-fe-value-2>value</a> of <code id=spelling-and-grammar-checking:the-textarea-element-2><a href=form-elements.html#the-textarea-element>textarea</a></code> elements that do not
   have a <code id=spelling-and-grammar-checking:attr-textarea-readonly><a href=form-elements.html#attr-textarea-readonly>readonly</a></code> attribute and that are not <a href=form-control-infrastructure.html#concept-fe-disabled id=spelling-and-grammar-checking:concept-fe-disabled-2>disabled</a>.<li>Text in <code id=spelling-and-grammar-checking:text><a data-x-internal=text href=https://dom.spec.whatwg.org/#interface-text>Text</a></code> nodes that are children of <a href=https://w3c.github.io/editing/execCommand.html#editing-host id=spelling-and-grammar-checking:editing-host-2 data-x-internal=editing-host>editing
   hosts</a> or <a id=spelling-and-grammar-checking:editable href=https://w3c.github.io/editing/execCommand.html#editable data-x-internal=editable>editable</a> elements.<li>Text in attributes of <a id=spelling-and-grammar-checking:editable-2 href=https://w3c.github.io/editing/execCommand.html#editable data-x-internal=editable>editable</a> elements.</ul>

  <p>For text that is part of a <code id=spelling-and-grammar-checking:text-2><a data-x-internal=text href=https://dom.spec.whatwg.org/#interface-text>Text</a></code> node, the element with which the text is
  associated is the element that is the immediate parent of the first character of the word,
  sentence, or other piece of text. For text in attributes, it is the attribute's element. For the
  values of <code id=spelling-and-grammar-checking:the-input-element-2><a href=input.html#the-input-element>input</a></code> and <code id=spelling-and-grammar-checking:the-textarea-element-3><a href=form-elements.html#the-textarea-element>textarea</a></code> elements, it is the element itself.</p>

  <p>To determine if a word, sentence, or other piece of text in an applicable element (as defined
  above) is to have spelling- and grammar-checking enabled, the UA must use the following
  algorithm:</p>

  <ol><li>If the user has disabled the checking for this text, then the checking is disabled.<li>Otherwise, if the user has forced the checking for this text to always be enabled, then the
   checking is enabled.<li>Otherwise, if the element with which the text is associated has a <code id=spelling-and-grammar-checking:attr-spellcheck-10><a href=#attr-spellcheck>spellcheck</a></code> content attribute, then: if that attribute is in the
   <i>true</i> state, then checking is enabled; otherwise, if that attribute is in the <i>false</i>
   state, then checking is disabled.<li>Otherwise, if there is an ancestor element with a <code id=spelling-and-grammar-checking:attr-spellcheck-11><a href=#attr-spellcheck>spellcheck</a></code> content attribute that is not in the <i>default</i>
   state, then: if the nearest such ancestor's <code id=spelling-and-grammar-checking:attr-spellcheck-12><a href=#attr-spellcheck>spellcheck</a></code>
   content attribute is in the <i>true</i> state, then checking is enabled; otherwise, checking is
   disabled.<li>Otherwise, if the element's <a href=#concept-spellcheck-default id=spelling-and-grammar-checking:concept-spellcheck-default-3>default behavior</a>
   is <a href=#concept-spellcheck-default-true id=spelling-and-grammar-checking:concept-spellcheck-default-true-2>true-by-default</a>, then checking is
   enabled.<li>Otherwise, if the element's <a href=#concept-spellcheck-default id=spelling-and-grammar-checking:concept-spellcheck-default-4>default behavior</a>
   is <a href=#concept-spellcheck-default-false id=spelling-and-grammar-checking:concept-spellcheck-default-false>false-by-default</a>, then checking is
   disabled.<li>Otherwise, if the element's parent element has <em>its</em> checking enabled, then checking
   is enabled.<li>Otherwise, checking is disabled.</ol>

  <p>If the checking is enabled for a word/sentence/text, the user agent should indicate spelling
  and grammar errors in that text. User agents should take into account the other semantics given in
  the document when suggesting spelling and grammar corrections. User agents may use the language of
  the element to determine what spelling and grammar rules to use, or may use the user's preferred
  language settings. UAs should use <code id=spelling-and-grammar-checking:the-input-element-3><a href=input.html#the-input-element>input</a></code> element attributes such as <code id=spelling-and-grammar-checking:attr-input-pattern><a href=input.html#attr-input-pattern>pattern</a></code> to ensure that the resulting value is valid, where
  possible.</p>

  <p>If checking is disabled, the user agent should not indicate spelling or grammar errors for that
  text.</p>

  <div class=example>

   <p>The element with ID "a" in the following example would be the one used to determine if the
   word "Hello" is checked for spelling errors. In this example, it would not be.</p>

   <pre>&lt;div contenteditable="true">
 &lt;span spellcheck="false" id="a">Hell&lt;/span>&lt;em>o!&lt;/em>
&lt;/div></pre>

   <p>The element with ID "b" in the following example would have checking enabled (the leading
   space character in the attribute's value on the <code id=spelling-and-grammar-checking:the-input-element-4><a href=input.html#the-input-element>input</a></code> element causes the attribute
   to be ignored, so the ancestor's value is used instead, regardless of the default).</p>

   <pre class=bad>&lt;p spellcheck="true">
 &lt;label>Name: &lt;input spellcheck=" false" id="b">&lt;/label>
&lt;/p></pre>

  </div>

  

  <p class=note>This specification does not define the user interface for spelling and grammar
  checkers. A user agent could offer on-demand checking, could perform continuous checking while the
  checking is enabled, or could use other interfaces.</p>


  <nav><a href=microdata.html>← 5 Microdata</a> — <a href=index.html>Table of Contents</a> — <a href=dnd.html>6.7 Drag and drop →</a></nav>
